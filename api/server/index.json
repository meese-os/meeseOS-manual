[
  {
    "__docId__": 1,
    "kind": "external",
    "name": "Infinity",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Infinity",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Infinity",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 2,
    "kind": "external",
    "name": "NaN",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/NaN",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~NaN",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 3,
    "kind": "external",
    "name": "undefined",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/undefined",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~undefined",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 4,
    "kind": "external",
    "name": "null",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/null",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~null",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 5,
    "kind": "external",
    "name": "Object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 6,
    "kind": "external",
    "name": "object",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~object",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 7,
    "kind": "external",
    "name": "Function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 8,
    "kind": "external",
    "name": "function",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~function",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 9,
    "kind": "external",
    "name": "Boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 10,
    "kind": "external",
    "name": "boolean",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Boolean",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~boolean",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 11,
    "kind": "external",
    "name": "Symbol",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Symbol",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Symbol",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 12,
    "kind": "external",
    "name": "Error",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Error",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Error",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 13,
    "kind": "external",
    "name": "EvalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/EvalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~EvalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 14,
    "kind": "external",
    "name": "InternalError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/InternalError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~InternalError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 15,
    "kind": "external",
    "name": "RangeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RangeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RangeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 16,
    "kind": "external",
    "name": "ReferenceError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ReferenceError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ReferenceError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 17,
    "kind": "external",
    "name": "SyntaxError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SyntaxError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~SyntaxError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 18,
    "kind": "external",
    "name": "TypeError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypeError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~TypeError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 19,
    "kind": "external",
    "name": "URIError",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/URIError",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~URIError",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 20,
    "kind": "external",
    "name": "Number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 21,
    "kind": "external",
    "name": "number",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~number",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 22,
    "kind": "external",
    "name": "Date",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Date",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 23,
    "kind": "external",
    "name": "String",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~String",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 24,
    "kind": "external",
    "name": "string",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~string",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 25,
    "kind": "external",
    "name": "RegExp",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~RegExp",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 26,
    "kind": "external",
    "name": "Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 27,
    "kind": "external",
    "name": "Int8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 28,
    "kind": "external",
    "name": "Uint8Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 29,
    "kind": "external",
    "name": "Uint8ClampedArray",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8ClampedArray",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint8ClampedArray",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 30,
    "kind": "external",
    "name": "Int16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 31,
    "kind": "external",
    "name": "Uint16Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint16Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint16Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 32,
    "kind": "external",
    "name": "Int32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Int32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Int32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 33,
    "kind": "external",
    "name": "Uint32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Uint32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 34,
    "kind": "external",
    "name": "Float32Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float32Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float32Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 35,
    "kind": "external",
    "name": "Float64Array",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Float64Array",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Float64Array",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 36,
    "kind": "external",
    "name": "Map",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Map",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 37,
    "kind": "external",
    "name": "Set",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Set",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 38,
    "kind": "external",
    "name": "WeakMap",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakMap",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakMap",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 39,
    "kind": "external",
    "name": "WeakSet",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/WeakSet",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~WeakSet",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 40,
    "kind": "external",
    "name": "ArrayBuffer",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/ArrayBuffer",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~ArrayBuffer",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 41,
    "kind": "external",
    "name": "DataView",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/DataView",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~DataView",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 42,
    "kind": "external",
    "name": "JSON",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~JSON",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 43,
    "kind": "external",
    "name": "Promise",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Promise",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 44,
    "kind": "external",
    "name": "Generator",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Generator",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 45,
    "kind": "external",
    "name": "GeneratorFunction",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/GeneratorFunction",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~GeneratorFunction",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 46,
    "kind": "external",
    "name": "Reflect",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Reflect",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Reflect",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 47,
    "kind": "external",
    "name": "Proxy",
    "externalLink": "https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy",
    "memberof": "src/.external-ecmascript.js",
    "static": true,
    "longname": "src/.external-ecmascript.js~Proxy",
    "access": "public",
    "description": "",
    "builtinExternal": true
  },
  {
    "__docId__": 48,
    "kind": "file",
    "name": "src/adapters/auth/null.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Null Auth adapter\n * @param {Core} core MeeseOS Core instance reference\n * @param {Object} [options] Adapter options\n */\nmodule.exports = (_core, _options) => ({\n\tinit: async () => true,\n\tdestroy: async () => true,\n\tregister: async (req, _res) => ({ username: req.body.username }),\n\tlogin: async (req, _res) => ({ id: 0, username: req.body.username }),\n\tlogout: async (_req, _res) => true,\n});\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/adapters/auth/null.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 49,
    "kind": "function",
    "name": "null",
    "memberof": "src/adapters/auth/null.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/auth/null.js~null",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/adapters/auth/null.js",
    "importStyle": "null",
    "description": "Null Auth adapter",
    "lineNumber": 36,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Adapter options"
      }
    ],
    "return": null
  },
  {
    "__docId__": 50,
    "kind": "file",
    "name": "src/adapters/settings/fs.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\nconst fs = require(\"fs-extra\");\nconst path = require(\"path\");\n\n/**\n * FS Settings adapter\n * @param {Core} core MeeseOS Core instance reference\n * @param {Object} [options] Adapter options\n */\nmodule.exports = (core, options) => {\n\tconst fsOptions = {\n\t\tsystem: false,\n\t\tpath: \"home:/.meeseOS/settings.json\",\n\t\t...(options || {}),\n\t};\n\n\tconst getRealFilename = (req) =>\n\t\tfsOptions.system\n\t\t\t? Promise.resolve(fsOptions.path)\n\t\t\t: core.make(\"meeseOS/vfs\").realpath(fsOptions.path, req.session.user);\n\n\tconst before = (req) =>\n\t\tgetRealFilename(req).then((filename) =>\n\t\t\tfs.ensureDir(path.dirname(filename)).then(() => filename)\n\t\t);\n\n\tconst save = (req) =>\n\t\tbefore(req)\n\t\t\t.then((filename) => fs.writeJson(filename, req.body))\n\t\t\t.then(() => true);\n\n\tconst load = (req) =>\n\t\tbefore(req)\n\t\t\t.then((filename) => fs.readJson(filename))\n\t\t\t.catch((error) => {\n\t\t\t\tcore.logger.warn(error);\n\t\t\t\treturn {};\n\t\t\t});\n\n\treturn { save, load };\n};\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/adapters/settings/fs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 51,
    "kind": "function",
    "name": "fs",
    "memberof": "src/adapters/settings/fs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/settings/fs.js~fs",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/adapters/settings/fs.js",
    "importStyle": "fs",
    "description": "FS Settings adapter",
    "lineNumber": 38,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Adapter options"
      }
    ],
    "return": {
      "types": [
        "{\"save\": *, \"load\": *}"
      ]
    }
  },
  {
    "__docId__": 52,
    "kind": "file",
    "name": "src/adapters/settings/null.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\n/**\n * Null Settings adapter\n * @param {Core} core MeeseOS Core instance reference\n * @param {Object} [options] Adapter options\n */\nmodule.exports = (core, options) => ({\n\tinit: async () => true,\n\tdestroy: async () => true,\n\tsave: async () => true,\n\tload: async () => ({}),\n});\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/adapters/settings/null.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 53,
    "kind": "function",
    "name": "null",
    "memberof": "src/adapters/settings/null.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/adapters/settings/null.js~null",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/adapters/settings/null.js",
    "importStyle": "null",
    "description": "Null Settings adapter",
    "lineNumber": 36,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Adapter options"
      }
    ],
    "return": null
  },
  {
    "__docId__": 54,
    "kind": "file",
    "name": "src/core.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst { consola } = require(\"consola\");\nconst deepmerge = require(\"deepmerge\");\nconst express = require(\"express\");\n// eslint-disable-next-line no-unused-vars\nconst express_ws = require(\"express-ws\");\nconst fs = require(\"fs-extra\");\nconst http = require(\"http\");\nconst https = require(\"https\");\nconst morgan = require(\"morgan\");\nconst minimist = require(\"minimist\");\nconst path = require(\"path\");\nconst { CoreBase } = require(\"@meese-os/common\");\nconst {\n\targvToConfig,\n\tcreateSession,\n\tcreateWebsocket,\n\tparseJson,\n} = require(\"./utils/core.js\");\nconst { defaultConfiguration } = require(\"./config.js\");\nconst logger = consola.withTag(\"Core\");\n\nlet _instance;\n\n/**\n * MeeseOS Server Core\n */\nclass Core extends CoreBase {\n\t/**\n\t * Creates a new Core instance.\n\t * @param {Object} cfg Configuration tree\n\t * @param {Object} [options] Options\n\t */\n\tconstructor(cfg, options = {}) {\n\t\toptions = {\n\t\t\targv: process.argv.splice(2),\n\t\t\troot: process.cwd(),\n\t\t\t...options,\n\t\t};\n\n\t\tconst argv = minimist(options.argv);\n\t\tconst val = (k) => argvToConfig[k](parseJson(argv[k]));\n\t\tconst keys = Object.keys(argvToConfig).filter((k) =>\n\t\t\tObject.prototype.hasOwnProperty.call(argv, k)\n\t\t);\n\t\tconst argvConfig = keys.reduce((o, k) => {\n\t\t\tlogger.info(`CLI argument '--${k}' overrides`, val(k));\n\t\t\treturn { ...o, ...deepmerge(o, val(k)) };\n\t\t}, {});\n\n\t\tsuper(defaultConfiguration, deepmerge(cfg, argvConfig), options);\n\n\t\tthis.logger = consola.withTag(\"Internal\");\n\n\t\t/**\n\t\t * @type {Express}\n\t\t */\n\t\tthis.app = express();\n\n\t\tif (!this.configuration.public) {\n\t\t\tthrow new Error(\"The public option is required\");\n\t\t}\n\n\t\t/**\n\t\t * @type {http.Server|https.Server}\n\t\t */\n\t\tthis.httpServer = this.config(\"https.enabled\")\n\t\t\t? https.createServer(this.config(\"https.options\"), this.app)\n\t\t\t: http.createServer(this.app);\n\n\t\t/**\n\t\t * @type {express.RequestHandler}\n\t\t */\n\t\tthis.session = createSession(this.configuration);\n\n\t\t/**\n\t\t * @type {express_ws.Instance}\n\t\t */\n\t\tthis.ws = createWebsocket(\n\t\t\tthis.app,\n\t\t\tthis.configuration,\n\t\t\tthis.session,\n\t\t\tthis.httpServer\n\t\t);\n\n\t\t/**\n\t\t * @type {Object}\n\t\t */\n\t\tthis.wss = this.ws.getWss();\n\n\t\t_instance = this;\n\t}\n\n\t/**\n\t * Destroys the instance.\n\t * @param {Function} [done] Callback when done\n\t * @returns {Promise<undefined>}\n\t */\n\tasync destroy(done = () => {}) {\n\t\tif (this.destroyed) return;\n\n\t\tthis.emit(\"meeseOS/core:destroy\");\n\t\tlogger.info(\"Shutting down...\");\n\n\t\tif (this.wss) {\n\t\t\tthis.wss.close();\n\t\t}\n\n\t\tconst finish = (error) => {\n\t\t\tif (error) {\n\t\t\t\tlogger.error(error);\n\t\t\t}\n\n\t\t\tif (this.httpServer) {\n\t\t\t\tthis.httpServer.close(done);\n\t\t\t} else {\n\t\t\t\tdone();\n\t\t\t}\n\t\t};\n\n\t\ttry {\n\t\t\tawait super.destroy();\n\t\t\tfinish();\n\t\t} catch (e) {\n\t\t\tfinish(e);\n\t\t}\n\t}\n\n\t/**\n\t * Starts the server.\n\t * @returns {Promise<Boolean>}\n\t */\n\tasync start() {\n\t\tif (!this.started) {\n\t\t\tlogger.info(\"Starting services...\");\n\n\t\t\tawait super.start();\n\n\t\t\tlogger.success(\"Initialized!\");\n\n\t\t\tawait this.listen();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Initializes the server.\n\t * @returns {Promise<Boolean>}\n\t */\n\tasync boot() {\n\t\tif (this.booted) return true;\n\t\tthis.emit(\"meeseOS/core:start\");\n\n\t\tif (this.configuration.logging) {\n\t\t\tthis.wss.on(\"connection\", (c) => {\n\t\t\t\tlogger.log(\"WebSocket connection opened\");\n\t\t\t\tc.on(\"close\", () => logger.log(\"WebSocket connection closed\"));\n\t\t\t});\n\n\t\t\tif (this.configuration.morgan) {\n\t\t\t\tthis.app.use(morgan(this.configuration.morgan));\n\t\t\t}\n\t\t}\n\n\t\tlogger.info(\"Initializing services...\");\n\n\t\tawait super.boot();\n\t\tthis.emit(\"init\");\n\t\tawait this.start();\n\t\tthis.emit(\"meeseOS/core:started\");\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Opens HTTP server.\n\t */\n\tlisten() {\n\t\tconst httpPort = this.config(\"port\");\n\t\tconst httpHost = this.config(\"bind\");\n\t\tconst wsPort = this.config(\"ws.port\") || httpPort;\n\t\tconst pub = this.config(\"public\");\n\t\tconst session = path.basename(\n\t\t\tpath.dirname(this.config(\"session.store.module\"))\n\t\t);\n\t\tconst dist = pub.replace(process.cwd(), \"\");\n\t\tconst secure = this.config(\"https.enabled\", false);\n\t\tconst proto = (prefix) => `${prefix}${secure ? \"s\" : \"\"}://`;\n\t\tconst host = (port) => `${httpHost}:${port}`;\n\n\t\tlogger.info(\"Opening server connection\");\n\n\t\tconst checkFile = path.join(pub, this.configuration.index);\n\t\tif (!fs.existsSync(checkFile)) {\n\t\t\tlogger.warn(\n\t\t\t\t\"Missing files in \\\"dist/\\\" directory. Did you forget to run \\\"npm run build\\\" ?\"\n\t\t\t);\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\ttry {\n\t\t\t\tthis.httpServer.listen(httpPort, httpHost, (e) => {\n\t\t\t\t\tif (e) {\n\t\t\t\t\t\treject(e);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlogger.success(`Using '${session}' sessions`);\n\t\t\t\t\t\tlogger.success(`Serving '${dist}'`);\n\t\t\t\t\t\tlogger.success(\n\t\t\t\t\t\t\t`WebSocket listening on ${proto(\"ws\")}${host(wsPort)}`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tlogger.success(\n\t\t\t\t\t\t\t`Server listening on ${proto(\"http\")}${host(httpPort)}`\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} catch (e) {\n\t\t\t\treject(e);\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Broadcast given event to client.\n\t * @param {String} name Event name\n\t * @param {Array} params A list of parameters to send to client\n\t * @param {Function} [filter] A function to filter clients\n\t */\n\tbroadcast(name, params, filter) {\n\t\tfilter = filter || (() => true);\n\t\tif (!this.ws) return;\n\n\t\tthis.wss.clients // This is a Set\n\t\t\t.forEach((client) => {\n\t\t\t\tif (!client._meeseOS_client) return;\n\n\t\t\t\tif (filter(client)) {\n\t\t\t\t\tclient.send(\n\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\tparams,\n\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t/**\n\t * Broadcast given event to all clients.\n\t * @param {String} name Event name\n\t * @param {Array} ...params A list of parameters to send to client\n\t */\n\tbroadcastAll(name, ...params) {\n\t\treturn this.broadcast(name, params);\n\t}\n\n\t/**\n\t * Broadcast given event to client filtered by username.\n\t * @param {String} username Username to send to\n\t * @param {String} name Event name\n\t * @param {Array} ...params A list of parameters to send to client\n\t */\n\tbroadcastUser(username, name, ...params) {\n\t\treturn this.broadcast(name, params, (client) => {\n\t\t\treturn client._meeseOS_client.username === username;\n\t\t});\n\t}\n\n\t/**\n\t * Gets the server instance.\n\t * @returns {Core}\n\t */\n\tstatic getInstance() {\n\t\treturn _instance;\n\t}\n}\n\nmodule.exports = Core;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/core.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 55,
    "kind": "variable",
    "name": "consola",
    "memberof": "src/core.js",
    "static": true,
    "longname": "src/core.js~consola",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 56,
    "kind": "variable",
    "name": "CoreBase",
    "memberof": "src/core.js",
    "static": true,
    "longname": "src/core.js~CoreBase",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 44,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 57,
    "kind": "variable",
    "name": "argvToConfig",
    "memberof": "src/core.js",
    "static": true,
    "longname": "src/core.js~argvToConfig",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 46,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 58,
    "kind": "variable",
    "name": "defaultConfiguration",
    "memberof": "src/core.js",
    "static": true,
    "longname": "src/core.js~defaultConfiguration",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 53,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 59,
    "kind": "variable",
    "name": "logger",
    "memberof": "src/core.js",
    "static": true,
    "longname": "src/core.js~logger",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 60,
    "kind": "class",
    "name": "Core",
    "memberof": "src/core.js",
    "static": true,
    "longname": "src/core.js~Core",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/core.js",
    "importStyle": "Core",
    "description": "MeeseOS Server Core",
    "lineNumber": 61,
    "interface": false,
    "extends": [
      "CoreBase"
    ]
  },
  {
    "__docId__": 61,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/core.js~Core#constructor",
    "access": "public",
    "description": "Creates a new Core instance.",
    "lineNumber": 67,
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "cfg",
        "description": "Configuration tree"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Options"
      }
    ]
  },
  {
    "__docId__": 62,
    "kind": "member",
    "name": "logger",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#logger",
    "access": "public",
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 63,
    "kind": "member",
    "name": "app",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#app",
    "access": "public",
    "description": "",
    "lineNumber": 91,
    "type": {
      "nullable": null,
      "types": [
        "Express"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 64,
    "kind": "member",
    "name": "httpServer",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#httpServer",
    "access": "public",
    "description": "",
    "lineNumber": 100,
    "type": {
      "nullable": null,
      "types": [
        "http.Server",
        "https.Server"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 65,
    "kind": "member",
    "name": "session",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#session",
    "access": "public",
    "description": "",
    "lineNumber": 107,
    "type": {
      "nullable": null,
      "types": [
        "express.RequestHandler"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 66,
    "kind": "member",
    "name": "ws",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#ws",
    "access": "public",
    "description": "",
    "lineNumber": 112,
    "type": {
      "nullable": null,
      "types": [
        "express_ws.Instance"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 67,
    "kind": "member",
    "name": "wss",
    "memberof": "src/core.js~Core",
    "static": false,
    "longname": "src/core.js~Core#wss",
    "access": "public",
    "description": "",
    "lineNumber": 122,
    "type": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 68,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/core.js~Core#destroy",
    "access": "public",
    "description": "Destroys the instance.",
    "lineNumber": 132,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": true,
        "name": "done",
        "description": "Callback when done"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 69,
    "kind": "method",
    "name": "start",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/core.js~Core#start",
    "access": "public",
    "description": "Starts the server.",
    "lineNumber": 166,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 70,
    "kind": "method",
    "name": "boot",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/core.js~Core#boot",
    "access": "public",
    "description": "Initializes the server.",
    "lineNumber": 184,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 71,
    "kind": "method",
    "name": "listen",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/core.js~Core#listen",
    "access": "public",
    "description": "Opens HTTP server.",
    "lineNumber": 212,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 72,
    "kind": "method",
    "name": "broadcast",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/core.js~Core#broadcast",
    "access": "public",
    "description": "Broadcast given event to client.",
    "lineNumber": 263,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Event name"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "A list of parameters to send to client"
      },
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": true,
        "name": "filter",
        "description": "A function to filter clients"
      }
    ],
    "return": null
  },
  {
    "__docId__": 73,
    "kind": "method",
    "name": "broadcastAll",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/core.js~Core#broadcastAll",
    "access": "public",
    "description": "Broadcast given event to all clients.",
    "lineNumber": 287,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Event name"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "...params",
        "description": "A list of parameters to send to client"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 74,
    "kind": "method",
    "name": "broadcastUser",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/core.js~Core#broadcastUser",
    "access": "public",
    "description": "Broadcast given event to client filtered by username.",
    "lineNumber": 297,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "username",
        "description": "Username to send to"
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "name",
        "description": "Event name"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "...params",
        "description": "A list of parameters to send to client"
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 75,
    "kind": "method",
    "name": "getInstance",
    "memberof": "src/core.js~Core",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/core.js~Core.getInstance",
    "access": "public",
    "description": "Gets the server instance.",
    "lineNumber": 307,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Core}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 76,
    "kind": "file",
    "name": "src/package.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst path = require(\"path\");\nconst chokidar = require(\"chokidar\");\n\n/**\n * TODO: typedef\n * @typedef {Object} PackageMetadata\n */\n\n/**\n * Package Options\n * @typedef {Object} PackageOptions\n * @property {String} filename\n * @property {PackageMetadata} metadata\n */\n\n/**\n * MeeseOS Package Abstraction\n */\nclass Package {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {PackageOptions} [options={}] Instance options\n\t */\n\tconstructor(core, options = {}) {\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\tthis.script = options.metadata.server\n\t\t\t? path.resolve(path.dirname(options.filename), options.metadata.server)\n\t\t\t: null;\n\n\t\t/**\n\t\t * @type {String}\n\t\t */\n\t\tthis.filename = options.filename;\n\n\t\t/**\n\t\t * @type {PackageMetadata}\n\t\t */\n\t\tthis.metadata = options.metadata;\n\n\t\tthis.handler = null;\n\n\t\tthis.watcher = null;\n\t}\n\n\t/**\n\t * Destroys instance.\n\t */\n\tasync destroy() {\n\t\tthis.action(\"destroy\");\n\n\t\tif (this.watcher) {\n\t\t\tawait this.watcher.close();\n\t\t\tthis.watcher = null;\n\t\t}\n\t}\n\n\t/**\n\t * Run method on package script.\n\t * @param {String} method Method name\n\t * @param {*} [...args] Pass arguments\n\t * @returns {Boolean}\n\t */\n\taction(method, ...args) {\n\t\ttry {\n\t\t\tif (this.handler && typeof this.handler[method] === \"function\") {\n\t\t\t\tthis.handler[method](...args);\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\tthis.core.logger.warn(e);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Validates this package.\n\t * @param {PackageMetadata[]} manifest Global manifest\n\t * @returns {Boolean}\n\t */\n\tvalidate(manifest) {\n\t\treturn (\n\t\t\tthis.script &&\n\t\t\tthis.metadata &&\n\t\t\tBoolean(manifest.find((iter) => iter.name === this.metadata.name))\n\t\t);\n\t}\n\n\t/**\n\t * Initializes this package.\n\t * @returns {Promise<undefined>}\n\t */\n\tinit() {\n\t\tconst mod = require(this.script);\n\t\tconst handler = typeof mod.default === \"function\" ? mod.default : mod;\n\n\t\tthis.handler = handler(this.core, this);\n\n\t\tif (typeof this.handler.init === \"function\") {\n\t\t\treturn this.handler.init();\n\t\t}\n\n\t\treturn Promise.resolve();\n\t}\n\n\t/**\n\t * Starts server scripts.\n\t * @returns {Promise<undefined>}\n\t */\n\tstart() {\n\t\treturn this.action(\"start\");\n\t}\n\n\t/**\n\t * Creates a watch in package dist.\n\t * @param {Function} cb Callback function on watch changes\n\t * @returns {String} Watched path\n\t */\n\twatch(cb) {\n\t\tconst pub = this.core.config(\"public\");\n\t\tconst dist = path.join(pub, \"apps\", this.metadata.name);\n\n\t\tthis.watcher = chokidar.watch(dist);\n\t\tthis.watcher.on(\"change\", () => cb(this.metadata));\n\n\t\treturn dist;\n\t}\n\n\t/**\n\t * Resolve an URL for resource.\n\t * @param {String} path Input path\n\t * @returns {String}\n\t */\n\tresource(path) {\n\t\tif (path.charAt(0) !== \"/\") {\n\t\t\tpath = `/${path}`;\n\t\t}\n\n\t\treturn `/apps/${this.metadata.name}${path}`;\n\t}\n}\n\nmodule.exports = Package;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/package.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 77,
    "kind": "typedef",
    "name": "PackageMetadata",
    "memberof": "src/package.js",
    "static": true,
    "longname": "src/package.js~PackageMetadata",
    "access": "public",
    "description": "TODO: typedef",
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "PackageMetadata"
    }
  },
  {
    "__docId__": 78,
    "kind": "typedef",
    "name": "PackageOptions",
    "memberof": "src/package.js",
    "static": true,
    "longname": "src/package.js~PackageOptions",
    "access": "public",
    "description": "Package Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "filename",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "PackageMetadata"
        ],
        "spread": false,
        "optional": false,
        "name": "metadata",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "PackageOptions"
    }
  },
  {
    "__docId__": 79,
    "kind": "class",
    "name": "Package",
    "memberof": "src/package.js",
    "static": true,
    "longname": "src/package.js~Package",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/package.js",
    "importStyle": "Package",
    "description": "MeeseOS Package Abstraction",
    "lineNumber": 49,
    "interface": false
  },
  {
    "__docId__": 80,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 55,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "PackageOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Instance options"
      }
    ]
  },
  {
    "__docId__": 81,
    "kind": "member",
    "name": "core",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#core",
    "access": "public",
    "description": "",
    "lineNumber": 59,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 82,
    "kind": "member",
    "name": "script",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#script",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 83,
    "kind": "member",
    "name": "filename",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#filename",
    "access": "public",
    "description": "",
    "lineNumber": 68,
    "type": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 84,
    "kind": "member",
    "name": "metadata",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#metadata",
    "access": "public",
    "description": "",
    "lineNumber": 73,
    "type": {
      "nullable": null,
      "types": [
        "PackageMetadata"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 85,
    "kind": "member",
    "name": "handler",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#handler",
    "access": "public",
    "description": null,
    "lineNumber": 75,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 86,
    "kind": "member",
    "name": "watcher",
    "memberof": "src/package.js~Package",
    "static": false,
    "longname": "src/package.js~Package#watcher",
    "access": "public",
    "description": null,
    "lineNumber": 77,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 87,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/package.js~Package#destroy",
    "access": "public",
    "description": "Destroys instance.",
    "lineNumber": 83,
    "params": [],
    "return": null
  },
  {
    "__docId__": 89,
    "kind": "method",
    "name": "action",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#action",
    "access": "public",
    "description": "Run method on package script.",
    "lineNumber": 98,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": "Method name"
      },
      {
        "nullable": null,
        "types": [
          "*"
        ],
        "spread": false,
        "optional": true,
        "name": "...args",
        "description": "Pass arguments"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 90,
    "kind": "method",
    "name": "validate",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#validate",
    "access": "public",
    "description": "Validates this package.",
    "lineNumber": 117,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "PackageMetadata[]"
        ],
        "spread": false,
        "optional": false,
        "name": "manifest",
        "description": "Global manifest"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 91,
    "kind": "method",
    "name": "init",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#init",
    "access": "public",
    "description": "Initializes this package.",
    "lineNumber": 129,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 93,
    "kind": "method",
    "name": "start",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#start",
    "access": "public",
    "description": "Starts server scripts.",
    "lineNumber": 146,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 94,
    "kind": "method",
    "name": "watch",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#watch",
    "access": "public",
    "description": "Creates a watch in package dist.",
    "lineNumber": 155,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String} Watched path"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Function"
        ],
        "spread": false,
        "optional": false,
        "name": "cb",
        "description": "Callback function on watch changes"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "Watched path"
    }
  },
  {
    "__docId__": 96,
    "kind": "method",
    "name": "resource",
    "memberof": "src/package.js~Package",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/package.js~Package#resource",
    "access": "public",
    "description": "Resolve an URL for resource.",
    "lineNumber": 170,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": "Input path"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 97,
    "kind": "file",
    "name": "src/packages.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst fs = require(\"fs-extra\");\nconst fg = require(\"fast-glob\");\nconst path = require(\"path\");\nconst Package = require(\"./package.js\");\nconst { consola } = require(\"consola\");\nconst logger = consola.withTag(\"Packages\");\n\nconst relative = (filename) => filename.replace(process.cwd(), \"\");\n\nconst readOrDefault = (filename) =>\n\tfs.existsSync(filename) ? fs.readJsonSync(filename) : [];\n\n/**\n * Package Service Options\n * @typedef {Object} PackagesOptions\n * @property {String} [manifestFile] Manifest filename\n * @property {String} [discoveredFile] Discovery output file\n */\n\n/**\n * MeeseOS Package Management\n */\nclass Packages {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {PackagesOptions} [options={}] Instance options\n\t */\n\tconstructor(core, options = {}) {\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\t/**\n\t\t * @type {Package[]}\n\t\t */\n\t\tthis.packages = [];\n\n\t\tthis.hotReloading = {};\n\n\t\t/**\n\t\t * @type {PackagesOptions}\n\t\t */\n\t\tthis.options = {\n\t\t\tmanifestFile: null,\n\t\t\tdiscoveredFile: null,\n\t\t\t...options,\n\t\t};\n\t}\n\n\t/**\n\t * Initializes packages.\n\t */\n\tinit() {\n\t\tthis.core.on(\"meeseOS/application:socket:message\", (ws, ...params) => {\n\t\t\tthis.handleMessage(ws, params);\n\t\t});\n\n\t\treturn this.load();\n\t}\n\n\t/**\n\t * Loads package manager.\n\t * @returns {Promise<Boolean>}\n\t */\n\tload() {\n\t\treturn this.createLoader().then((packages) => {\n\t\t\tthis.packages = this.packages.concat(packages);\n\n\t\t\treturn true;\n\t\t});\n\t}\n\n\t/**\n\t * Loads all packages.\n\t * @returns {Promise<Package[]>}\n\t */\n\tcreateLoader() {\n\t\tconst result = [];\n\t\tconst { discoveredFile, manifestFile } = this.options;\n\t\tconst discovered = readOrDefault(discoveredFile);\n\t\tconst manifest = readOrDefault(manifestFile);\n\t\tconst sources = discovered.map((d) => path.join(d, \"metadata.json\"));\n\n\t\tlogger.info(\"Using package discovery file\", relative(discoveredFile));\n\t\tlogger.info(\"Using package manifest file\", relative(manifestFile));\n\n\t\tconst stream = fg.stream(sources, {\n\t\t\textension: false,\n\t\t\tbrace: false,\n\t\t\tdeep: 1,\n\t\t\tcase: false,\n\t\t});\n\n\t\tstream.on(\"error\", (error) => logger.error(error));\n\t\tstream.on(\"data\", (filename) => {\n\t\t\tresult.push(this.loadPackage(filename, manifest));\n\t\t});\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tstream.once(\"end\", () => {\n\t\t\t\tPromise.all(result)\n\t\t\t\t\t.then((result) => result.filter((iter) => Boolean(iter.handler)))\n\t\t\t\t\t.then(resolve)\n\t\t\t\t\t.catch(reject);\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * When a package dist has changed.\n\t * @param {Package} pkg Package instance\n\t */\n\tonPackageChanged(pkg) {\n\t\tclearTimeout(this.hotReloading[pkg.metadata.name]);\n\n\t\tthis.hotReloading[pkg.metadata.name] = setTimeout(() => {\n\t\t\tlogger.debug(\"Sending reload signal for\", pkg.metadata.name);\n\t\t\tthis.core.broadcast(\"meeseOS/packages:package:changed\", [\n\t\t\t\tpkg.metadata.name,\n\t\t\t]);\n\t\t}, 500);\n\t}\n\n\t/**\n\t * Loads package data.\n\t * @param {String} filename Filename\n\t * @param {PackageMetadata} manifest Manifest\n\t * @returns {Promise<Package>}\n\t */\n\tloadPackage(filename, manifest) {\n\t\tconst done = (pkg, error) => {\n\t\t\tif (error) {\n\t\t\t\tlogger.warn(error);\n\t\t\t}\n\n\t\t\treturn Promise.resolve(pkg);\n\t\t};\n\n\t\treturn fs.readJson(filename).then((metadata) => {\n\t\t\tconst pkg = new Package(this.core, {\n\t\t\t\tfilename,\n\t\t\t\tmetadata,\n\t\t\t});\n\n\t\t\treturn this.initializePackage(pkg, manifest, done);\n\t\t});\n\t}\n\n\t/**\n\t * Initializes a package.\n\t * @returns {Promise<Package>}\n\t */\n\tinitializePackage(pkg, manifest, done) {\n\t\tif (pkg.validate(manifest)) {\n\t\t\tlogger.info(`Loading ${relative(pkg.script)}`);\n\n\t\t\ttry {\n\t\t\t\tif (this.core.configuration.development) {\n\t\t\t\t\tpkg.watch(() => {\n\t\t\t\t\t\tthis.onPackageChanged(pkg);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn pkg\n\t\t\t\t\t.init()\n\t\t\t\t\t.then(() => done(pkg))\n\t\t\t\t\t.catch((e) => done(pkg, e));\n\t\t\t} catch (e) {\n\t\t\t\treturn done(pkg, e);\n\t\t\t}\n\t\t}\n\n\t\treturn done(pkg);\n\t}\n\n\t/**\n\t * Starts packages.\n\t */\n\tstart() {\n\t\tthis.packages.forEach((pkg) => pkg.start());\n\t}\n\n\t/**\n\t * Destroys packages.\n\t * @returns {Promise<undefined>}\n\t */\n\tasync destroy() {\n\t\tawait Promise.all(this.packages.map((pkg) => pkg.destroy()));\n\n\t\tthis.packages = [];\n\t}\n\n\t/**\n\t * Handles an incoming message and signals an application.\n\t *\n\t * This will call the 'onmessage' event in your application server script.\n\t *\n\t * @param {WebSocket} ws Websocket Connection client\n\t * @param {Array} params A list of incoming parameters\n\t */\n\thandleMessage(ws, params) {\n\t\tconst { pid, name, args } = params[0];\n\t\tconst found = this.packages.findIndex(\n\t\t\t({ metadata }) => metadata.name === name\n\t\t);\n\n\t\tif (found !== -1) {\n\t\t\tconst { handler } = this.packages[found];\n\t\t\tif (handler && typeof handler.onmessage === \"function\") {\n\t\t\t\tconst respond = (...respondParams) =>\n\t\t\t\t\tws.send(\n\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\tname: \"meeseOS/application:socket:message\",\n\t\t\t\t\t\t\tparams: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tpid,\n\t\t\t\t\t\t\t\t\targs: respondParams,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\thandler.onmessage(ws, respond, args);\n\t\t\t}\n\t\t}\n\t}\n}\n\nmodule.exports = Packages;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/packages.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 98,
    "kind": "variable",
    "name": "consola",
    "memberof": "src/packages.js",
    "static": true,
    "longname": "src/packages.js~consola",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/packages.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 99,
    "kind": "variable",
    "name": "logger",
    "memberof": "src/packages.js",
    "static": true,
    "longname": "src/packages.js~logger",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/packages.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 37,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 100,
    "kind": "function",
    "name": "relative",
    "memberof": "src/packages.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/packages.js~relative",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/packages.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "params": [
      {
        "name": "filename",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 101,
    "kind": "function",
    "name": "readOrDefault",
    "memberof": "src/packages.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/packages.js~readOrDefault",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/packages.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "params": [
      {
        "name": "filename",
        "types": [
          "*"
        ]
      }
    ],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 102,
    "kind": "typedef",
    "name": "PackagesOptions",
    "memberof": "src/packages.js",
    "static": true,
    "longname": "src/packages.js~PackagesOptions",
    "access": "public",
    "description": "Package Service Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "manifestFile",
        "description": "Manifest filename"
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "discoveredFile",
        "description": "Discovery output file"
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "PackagesOptions"
    }
  },
  {
    "__docId__": 103,
    "kind": "class",
    "name": "Packages",
    "memberof": "src/packages.js",
    "static": true,
    "longname": "src/packages.js~Packages",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/packages.js",
    "importStyle": "Packages",
    "description": "MeeseOS Package Management",
    "lineNumber": 54,
    "interface": false
  },
  {
    "__docId__": 104,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 60,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "PackagesOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Instance options"
      }
    ]
  },
  {
    "__docId__": 105,
    "kind": "member",
    "name": "core",
    "memberof": "src/packages.js~Packages",
    "static": false,
    "longname": "src/packages.js~Packages#core",
    "access": "public",
    "description": "",
    "lineNumber": 64,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 106,
    "kind": "member",
    "name": "packages",
    "memberof": "src/packages.js~Packages",
    "static": false,
    "longname": "src/packages.js~Packages#packages",
    "access": "public",
    "description": "",
    "lineNumber": 69,
    "type": {
      "nullable": null,
      "types": [
        "Package[]"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 107,
    "kind": "member",
    "name": "hotReloading",
    "memberof": "src/packages.js~Packages",
    "static": false,
    "longname": "src/packages.js~Packages#hotReloading",
    "access": "public",
    "description": null,
    "lineNumber": 71,
    "undocument": true,
    "type": {
      "types": [
        "{}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 108,
    "kind": "member",
    "name": "options",
    "memberof": "src/packages.js~Packages",
    "static": false,
    "longname": "src/packages.js~Packages#options",
    "access": "public",
    "description": "",
    "lineNumber": 76,
    "type": {
      "nullable": null,
      "types": [
        "PackagesOptions"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 109,
    "kind": "method",
    "name": "init",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#init",
    "access": "public",
    "description": "Initializes packages.",
    "lineNumber": 86,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 110,
    "kind": "method",
    "name": "load",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#load",
    "access": "public",
    "description": "Loads package manager.",
    "lineNumber": 98,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 112,
    "kind": "method",
    "name": "createLoader",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#createLoader",
    "access": "public",
    "description": "Loads all packages.",
    "lineNumber": 110,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Package[]>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Package[]>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 113,
    "kind": "method",
    "name": "onPackageChanged",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#onPackageChanged",
    "access": "public",
    "description": "When a package dist has changed.",
    "lineNumber": 146,
    "params": [
      {
        "nullable": null,
        "types": [
          "Package"
        ],
        "spread": false,
        "optional": false,
        "name": "pkg",
        "description": "Package instance"
      }
    ],
    "return": null
  },
  {
    "__docId__": 114,
    "kind": "method",
    "name": "loadPackage",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#loadPackage",
    "access": "public",
    "description": "Loads package data.",
    "lineNumber": 163,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Package>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "filename",
        "description": "Filename"
      },
      {
        "nullable": null,
        "types": [
          "PackageMetadata"
        ],
        "spread": false,
        "optional": false,
        "name": "manifest",
        "description": "Manifest"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Package>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 115,
    "kind": "method",
    "name": "initializePackage",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#initializePackage",
    "access": "public",
    "description": "Initializes a package.",
    "lineNumber": 186,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Package>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Package>"
      ],
      "spread": false,
      "description": ""
    },
    "params": [
      {
        "name": "pkg",
        "types": [
          "*"
        ]
      },
      {
        "name": "manifest",
        "types": [
          "*"
        ]
      },
      {
        "name": "done",
        "types": [
          "*"
        ]
      }
    ]
  },
  {
    "__docId__": 116,
    "kind": "method",
    "name": "start",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#start",
    "access": "public",
    "description": "Starts packages.",
    "lineNumber": 212,
    "params": [],
    "return": null
  },
  {
    "__docId__": 117,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/packages.js~Packages#destroy",
    "access": "public",
    "description": "Destroys packages.",
    "lineNumber": 220,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 119,
    "kind": "method",
    "name": "handleMessage",
    "memberof": "src/packages.js~Packages",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/packages.js~Packages#handleMessage",
    "access": "public",
    "description": "Handles an incoming message and signals an application.\n\nThis will call the 'onmessage' event in your application server script.",
    "lineNumber": 234,
    "params": [
      {
        "nullable": null,
        "types": [
          "WebSocket"
        ],
        "spread": false,
        "optional": false,
        "name": "ws",
        "description": "Websocket Connection client"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "params",
        "description": "A list of incoming parameters"
      }
    ],
    "return": null
  },
  {
    "__docId__": 120,
    "kind": "file",
    "name": "src/providers/auth.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst { ServiceProvider } = require(\"@meese-os/common\");\nconst Auth = require(\"../auth.js\");\n\n/**\n * MeeseOS Auth Service Provider\n */\nclass AuthServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {Object} [options={}] Arguments\n\t */\n\tconstructor(core, options = {}) {\n\t\tsuper(core, options);\n\n\t\tthis.auth = new Auth(core, options);\n\t}\n\n\t/**\n\t * A list of services this provider depends on.\n\t * @returns {String[]}\n\t */\n\tdepends() {\n\t\treturn [\"meeseOS/token-factory\"];\n\t}\n\n\t/**\n\t * Initializes auth.\n\t * @returns {Promise<undefined>}\n\t */\n\tasync init() {\n\t\t// eslint-disable-next-line no-unused-vars\n\t\tconst { route, routeAuthenticated } = this.core.make(\"meeseOS/express\");\n\n\t\troute(\"post\", \"/register\", (req, res) => this.auth.register(req, res));\n\t\troute(\"post\", \"/login\", (req, res) => this.auth.login(req, res));\n\t\t// TODO: fix the issue of this not working when `routeAuthenticated` is used\n\t\troute(\"post\", \"/logout\", (req, res) => this.auth.logout(req, res));\n\n\t\tawait this.auth.init();\n\t}\n\n\t/**\n\t * Destroys instance.\n\t */\n\tdestroy() {\n\t\tthis.auth.destroy();\n\t\tsuper.destroy();\n\t}\n}\n\nmodule.exports = AuthServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/auth.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 121,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/auth.js",
    "static": true,
    "longname": "src/providers/auth.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/providers/auth.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 122,
    "kind": "class",
    "name": "AuthServiceProvider",
    "memberof": "src/providers/auth.js",
    "static": true,
    "longname": "src/providers/auth.js~AuthServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/providers/auth.js",
    "importStyle": "AuthServiceProvider",
    "description": "MeeseOS Auth Service Provider",
    "lineNumber": 38,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 123,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/auth.js~AuthServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/auth.js~AuthServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 44,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Arguments"
      }
    ]
  },
  {
    "__docId__": 124,
    "kind": "member",
    "name": "auth",
    "memberof": "src/providers/auth.js~AuthServiceProvider",
    "static": false,
    "longname": "src/providers/auth.js~AuthServiceProvider#auth",
    "access": "public",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 125,
    "kind": "method",
    "name": "depends",
    "memberof": "src/providers/auth.js~AuthServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/auth.js~AuthServiceProvider#depends",
    "access": "public",
    "description": "A list of services this provider depends on.",
    "lineNumber": 54,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 126,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/auth.js~AuthServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/auth.js~AuthServiceProvider#init",
    "access": "public",
    "description": "Initializes auth.",
    "lineNumber": 62,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 127,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/auth.js~AuthServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/auth.js~AuthServiceProvider#destroy",
    "access": "public",
    "description": "Destroys instance.",
    "lineNumber": 77,
    "params": [],
    "return": null
  },
  {
    "__docId__": 128,
    "kind": "file",
    "name": "src/providers/core.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst path = require(\"path\");\nconst express = require(\"express\");\nconst chokidar = require(\"chokidar\");\nconst bodyParser = require(\"body-parser\");\nconst helmet = require(\"helmet\");\nconst proxy = require(\"express-http-proxy\");\nconst nocache = require(\"nocache\");\nconst { ServiceProvider } = require(\"@meese-os/common\");\nconst {\n\tuseWebTokens,\n\tisAuthenticated,\n\tcloseWatches\n} = require(\"../utils/core.js\");\n\n/**\n * MeeseOS Core Service Provider\n */\nclass CoreServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {Object} [options] Arguments\n\t */\n\tconstructor(core, options) {\n\t\tsuper(core, options);\n\n\t\t/**\n\t\t * @type {Array}\n\t\t */\n\t\tthis.watches = [];\n\t}\n\n\t/**\n\t * Initializes provider.\n\t */\n\tinit() {\n\t\tthis.initService();\n\t\tthis.initExtensions();\n\t\tthis.initResourceRoutes();\n\t\tthis.initSocketRoutes();\n\t\tthis.initProxies();\n\t}\n\n\t/**\n\t * Starts provider.\n\t */\n\tstart() {\n\t\tif (this.core.configuration.development) {\n\t\t\tthis.initDeveloperTools();\n\t\t}\n\t}\n\n\t/**\n\t * Get a list of services this provider registers.\n\t * @returns {String[]}\n\t */\n\tstatic provides() {\n\t\treturn [\"meeseOS/express\"];\n\t}\n\n\t/**\n\t * Destroys provider.\n\t */\n\tasync destroy() {\n\t\tawait closeWatches(this.watches);\n\t\tsuper.destroy();\n\t}\n\n\t/**\n\t * Initializes the service APIs.\n\t */\n\tinitService() {\n\t\tconst { app } = this.core;\n\t\tconst { requireAllGroups } = this.core.configuration.auth;\n\n\t\tconst middleware = {\n\t\t\troute: [],\n\t\t\trouteAuthenticated: [],\n\t\t};\n\n\t\tthis.core.singleton(\"meeseOS/express\", () => ({\n\t\t\tuseWebTokens,\n\t\t\tisAuthenticated,\n\n\t\t\tcall: (method, ...args) => app[method](...args),\n\t\t\tuse: (arg) => app.use(arg),\n\n\t\t\twebsocket: (p, cb) => app.ws(p, cb),\n\n\t\t\tmiddleware: (authentication, cb) => {\n\t\t\t\tmiddleware[authentication ? \"routeAuthenticated\" : \"route\"].push(cb);\n\t\t\t},\n\n\t\t\troute: (method, uri, cb) =>\n\t\t\t\tapp[method.toLowerCase()](uri, [...middleware.route], cb),\n\n\t\t\trouteAuthenticated: (\n\t\t\t\tmethod,\n\t\t\t\turi,\n\t\t\t\tcb,\n\t\t\t\tgroups = [],\n\t\t\t\tstrict = requireAllGroups\n\t\t\t) =>\n\t\t\t\tapp[method.toLowerCase()](\n\t\t\t\t\turi,\n\t\t\t\t\t[\n\t\t\t\t\t\t...middleware.routeAuthenticated,\n\t\t\t\t\t\tuseWebTokens(app),\n\t\t\t\t\t\tisAuthenticated(groups, strict)\n\t\t\t\t\t],\n\t\t\t\t\tcb\n\t\t\t\t),\n\n\t\t\trouter: () => {\n\t\t\t\tconst router = express.Router();\n\t\t\t\trouter.use(...middleware.route);\n\t\t\t\treturn router;\n\t\t\t},\n\n\t\t\trouterAuthenticated: (groups = [], strict = requireAllGroups) => {\n\t\t\t\tconst router = express.Router();\n\t\t\t\trouter.use(...middleware.routeAuthenticated);\n\t\t\t\trouter.use(useWebTokens(app));\n\t\t\t\trouter.use(isAuthenticated(groups, strict));\n\t\t\t\treturn router;\n\t\t\t},\n\t\t}));\n\t}\n\n\t/**\n\t * Initializes Express extensions.\n\t */\n\tinitExtensions() {\n\t\tconst { app, session, configuration } = this.core;\n\t\tconst limit = configuration.express.maxBodySize;\n\n\t\tconst helmetConfig = {\n\t\t\tcontentSecurityPolicy: {\n\t\t\t\tuseDefaults: true,\n\t\t\t\tdirectives: {\n\t\t\t\t\t\"default-src\": [\"'self'\"],\n\t\t\t\t\t// Allow the Google Identity Services loader while keeping inline/eval allowances\n\t\t\t\t\t// used elsewhere in the app. Consider moving to nonces/hashes later.\n\t\t\t\t\t\"script-src\": [\n\t\t\t\t\t\t\"'self'\",\n\t\t\t\t\t\t\"'unsafe-inline'\",\n\t\t\t\t\t\t\"'unsafe-eval'\",\n\t\t\t\t\t\t\"https://accounts.google.com\",\n\t\t\t\t\t\t\"https://apis.google.com\",\n\t\t\t\t\t\t\"https://*.gstatic.com\",\n\t\t\t\t\t],\n\t\t\t\t\t\"style-src\": [\"'self'\", \"'unsafe-inline'\"],\n\t\t\t\t\t// Permit remote images (e.g., Unsplash wallpapers) in addition to local/data/blob\n\t\t\t\t\t\"img-src\": [\n\t\t\t\t\t\t\"'self'\",\n\t\t\t\t\t\t\"data:\",\n\t\t\t\t\t\t\"blob:\",\n\t\t\t\t\t\t\"https:\",\n\t\t\t\t\t],\n\t\t\t\t\t// Allow required outbound connections for GIS and similar SDKs\n\t\t\t\t\t\"connect-src\": [\n\t\t\t\t\t\t\"'self'\",\n\t\t\t\t\t\t\"https://accounts.google.com\",\n\t\t\t\t\t\t\"https://*.googleapis.com\",\n\t\t\t\t\t\t\"https://*.gstatic.com\",\n\t\t\t\t\t\t\"https://apis.google.com\",\n\t\t\t\t\t],\n\t\t\t\t\t// Allow embedding external applications without enumerating domains.\n\t\t\t\t\t// Keep clickjacking protection via frame-ancestors from Helmet defaults.\n\t\t\t\t\t\"frame-src\": [\n\t\t\t\t\t\t\"'self'\",\n\t\t\t\t\t\t\"https:\",\n\t\t\t\t\t\t\"blob:\",\n\t\t\t\t\t\t\"data:\",\n\t\t\t\t\t\t// Allow http: only in development for local testing\n\t\t\t\t\t\t...(configuration.development ? [\"http:\"] : []),\n\t\t\t\t\t],\n\t\t\t\t}\n\t\t\t},\n\t\t\treferrerPolicy: { policy: \"no-referrer\" },\n\t\t\tcrossOriginEmbedderPolicy: false,\n\t\t\t// Some OAuth/GIS popup flows require COOP to be disabled\n\t\t\tcrossOriginOpenerPolicy: { policy: \"unsafe-none\" },\n\t\t\thsts: configuration.development\n\t\t\t\t? false\n\t\t\t\t: {\n\t\t\t\t\tmaxAge: 63072000,\n\t\t\t\t\tincludeSubDomains: true,\n\t\t\t\t\tpreload: true,\n\t\t\t\t},\n\t\t};\n\n\t\tapp.use(helmet(helmetConfig));\n\n\t\tif (configuration.development) {\n\t\t\tapp.use(nocache());\n\t\t} else {\n\t\t\tapp.disable(\"x-powered-by\");\n\t\t}\n\n\t\t// Handle sessions\n\t\tapp.use(session);\n\n\t\t// Handle bodies\n\t\tapp.use(\n\t\t\tbodyParser.urlencoded({\n\t\t\t\textended: false,\n\t\t\t\tlimit,\n\t\t\t})\n\t\t);\n\n\t\tapp.use(\n\t\t\tbodyParser.json({\n\t\t\t\tlimit,\n\t\t\t})\n\t\t);\n\n\t\tapp.use(\n\t\t\tbodyParser.raw({\n\t\t\t\tlimit,\n\t\t\t})\n\t\t);\n\t}\n\n\t/**\n\t * Initializes Express base routes, etc.\n\t */\n\tinitResourceRoutes() {\n\t\tconst { app, configuration } = this.core;\n\t\tconst indexFile = path.join(configuration.public, configuration.index);\n\n\t\tapp.get(\"/\", (req, res) => res.sendFile(indexFile));\n\t\tapp.use(\"/\", express.static(configuration.public));\n\n\t\t// Internal ping\n\t\tapp.get(\"/ping\", (req, res) => {\n\t\t\tthis.core.emit(\"meeseOS/core:ping\", req);\n\n\t\t\ttry {\n\t\t\t\treq.session.touch();\n\t\t\t} catch (e) {\n\t\t\t\tthis.core.logger.warn(e);\n\t\t\t}\n\n\t\t\tres.status(200).send(\"ok\");\n\t\t});\n\t}\n\n\t/**\n\t * Initializes Socket routes.\n\t */\n\tinitSocketRoutes() {\n\t\tconst { app } = this.core;\n\n\t\tapp.ws(\"/\", (ws, req) => {\n\t\t\tws.upgradeReq = ws.upgradeReq || req;\n\t\t\tws._meeseOS_client = { ...req.session.user };\n\n\t\t\tconst interval = this.core.config(\"ws.ping\", 0);\n\n\t\t\tconst pingInterval = interval\n\t\t\t\t? setInterval(() => {\n\t\t\t\t\tws.send(\n\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\tname: \"meeseOS/core:ping\",\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t}, interval)\n\t\t\t\t: undefined;\n\n\t\t\tws.on(\"close\", () => {\n\t\t\t\tclearInterval(pingInterval);\n\t\t\t});\n\n\t\t\tws.on(\"message\", (msg) => {\n\t\t\t\ttry {\n\t\t\t\t\tconst { name, params } = JSON.parse(msg);\n\n\t\t\t\t\tif (typeof name === \"string\" && params instanceof Array) {\n\t\t\t\t\t\t// We don't wanna allow any internal signals from the outside!\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tname.match(/^meeseOS/) &&\n\t\t\t\t\t\t\tname !== \"meeseOS/application:socket:message\"\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.core.emit(name, ws, ...params);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthis.core.logger.warn(e);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tws.send(\n\t\t\t\tJSON.stringify({\n\t\t\t\t\tname: \"meeseOS/core:connected\",\n\t\t\t\t\tparams: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcookie: {\n\t\t\t\t\t\t\t\tmaxAge: this.core.config(\"session.options.cookie.maxAge\"),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t})\n\t\t\t);\n\t\t});\n\t}\n\n\t/**\n\t * Initializes Express proxies.\n\t */\n\tinitProxies() {\n\t\tconst { app, configuration } = this.core;\n\t\tconst proxies = (configuration.proxy || [])\n\t\t\t.map((item) => ({\n\t\t\t\tsource: null,\n\t\t\t\tdestination: null,\n\t\t\t\toptions: {},\n\t\t\t\t...item,\n\t\t\t}))\n\t\t\t.filter((item) => item.source && item.destination);\n\n\t\tproxies.forEach((item) => {\n\t\t\tthis.core.logger.info(`Proxying ${item.source} -> ${item.destination}`);\n\t\t\tapp.use(item.source, proxy(item.destination, item.options));\n\t\t});\n\t}\n\n\t/**\n\t * Initializes some developer features.\n\t */\n\tinitDeveloperTools() {\n\t\ttry {\n\t\t\tconst watchdir = path.resolve(this.core.configuration.public);\n\t\t\tconst watcher = chokidar.watch(watchdir);\n\n\t\t\twatcher.on(\"change\", (filename) => {\n\t\t\t\t// NOTE: 'ignored' does not work as expected with callback\n\t\t\t\t// ignored: str => str.match(/\\.(js|css)$/) === null\n\t\t\t\t// for unknown reasons\n\t\t\t\tif (!/\\.(js|css)$/i.test(filename)) return;\n\n\t\t\t\tconst relative = filename.replace(watchdir, \"\");\n\t\t\t\tthis.core.broadcast(\"meeseOS/dist:changed\", [relative]);\n\t\t\t});\n\n\t\t\tthis.watches.push(watcher);\n\t\t} catch (e) {\n\t\t\tthis.core.logger.warn(e);\n\t\t}\n\t}\n}\n\nmodule.exports = CoreServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/core.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 129,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/core.js",
    "static": true,
    "longname": "src/providers/core.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/providers/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 39,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 130,
    "kind": "variable",
    "name": "useWebTokens",
    "memberof": "src/providers/core.js",
    "static": true,
    "longname": "src/providers/core.js~useWebTokens",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/providers/core.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 41,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 131,
    "kind": "class",
    "name": "CoreServiceProvider",
    "memberof": "src/providers/core.js",
    "static": true,
    "longname": "src/providers/core.js~CoreServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/providers/core.js",
    "importStyle": "CoreServiceProvider",
    "description": "MeeseOS Core Service Provider",
    "lineNumber": 50,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 132,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 56,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Arguments"
      }
    ]
  },
  {
    "__docId__": 133,
    "kind": "member",
    "name": "watches",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#watches",
    "access": "public",
    "description": "",
    "lineNumber": 62,
    "type": {
      "nullable": null,
      "types": [
        "Array"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 134,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#init",
    "access": "public",
    "description": "Initializes provider.",
    "lineNumber": 68,
    "params": [],
    "return": null
  },
  {
    "__docId__": 135,
    "kind": "method",
    "name": "start",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#start",
    "access": "public",
    "description": "Starts provider.",
    "lineNumber": 79,
    "params": [],
    "return": null
  },
  {
    "__docId__": 136,
    "kind": "method",
    "name": "provides",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/providers/core.js~CoreServiceProvider.provides",
    "access": "public",
    "description": "Get a list of services this provider registers.",
    "lineNumber": 89,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 137,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#destroy",
    "access": "public",
    "description": "Destroys provider.",
    "lineNumber": 96,
    "params": [],
    "return": null
  },
  {
    "__docId__": 138,
    "kind": "method",
    "name": "initService",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initService",
    "access": "public",
    "description": "Initializes the service APIs.",
    "lineNumber": 104,
    "params": [],
    "return": null
  },
  {
    "__docId__": 139,
    "kind": "method",
    "name": "initExtensions",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initExtensions",
    "access": "public",
    "description": "Initializes Express extensions.",
    "lineNumber": 165,
    "params": [],
    "return": null
  },
  {
    "__docId__": 140,
    "kind": "method",
    "name": "initResourceRoutes",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initResourceRoutes",
    "access": "public",
    "description": "Initializes Express base routes, etc.",
    "lineNumber": 260,
    "params": [],
    "return": null
  },
  {
    "__docId__": 141,
    "kind": "method",
    "name": "initSocketRoutes",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initSocketRoutes",
    "access": "public",
    "description": "Initializes Socket routes.",
    "lineNumber": 284,
    "params": [],
    "return": null
  },
  {
    "__docId__": 142,
    "kind": "method",
    "name": "initProxies",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initProxies",
    "access": "public",
    "description": "Initializes Express proxies.",
    "lineNumber": 345,
    "params": [],
    "return": null
  },
  {
    "__docId__": 143,
    "kind": "method",
    "name": "initDeveloperTools",
    "memberof": "src/providers/core.js~CoreServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/core.js~CoreServiceProvider#initDeveloperTools",
    "access": "public",
    "description": "Initializes some developer features.",
    "lineNumber": 365,
    "params": [],
    "return": null
  },
  {
    "__docId__": 144,
    "kind": "file",
    "name": "src/providers/packages.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst fs = require(\"fs-extra\");\nconst path = require(\"path\");\nconst chokidar = require(\"chokidar\");\nconst { ServiceProvider } = require(\"@meese-os/common\");\nconst Packages = require(\"../packages\");\nconst { closeWatches } = require(\"../utils/core\");\n\n/**\n * MeeseOS Package Service Provider\n */\nclass PackageServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t */\n\tconstructor(core) {\n\t\tsuper(core);\n\n\t\tconst { configuration } = this.core;\n\t\tconst manifestFile = path.join(\n\t\t\tconfiguration.public,\n\t\t\tconfiguration.packages.metadata\n\t\t);\n\t\tconst discoveredFile = path.resolve(\n\t\t\tconfiguration.root,\n\t\t\tconfiguration.packages.discovery\n\t\t);\n\n\t\tthis.watches = [];\n\t\tthis.packages = new Packages(core, {\n\t\t\tmanifestFile,\n\t\t\tdiscoveredFile,\n\t\t});\n\t}\n\n\tstatic provides() {\n\t\treturn [\"meeseOS/packages\"];\n\t}\n\n\tinit() {\n\t\tthis.core.singleton(\"meeseOS/packages\", () => this.packages);\n\n\t\treturn this.packages.init();\n\t}\n\n\tstart() {\n\t\tthis.packages.start();\n\n\t\tif (this.core.configuration.development) {\n\t\t\tthis.initDeveloperTools();\n\t\t}\n\t}\n\n\tasync destroy() {\n\t\tawait closeWatches(this.watches);\n\t\tawait this.packages.destroy();\n\t\tsuper.destroy();\n\t}\n\n\t/**\n\t * Initializes some developer features.\n\t */\n\tinitDeveloperTools() {\n\t\tconst { manifestFile } = this.packages.options;\n\n\t\tif (fs.existsSync(manifestFile)) {\n\t\t\tconst watcher = chokidar.watch(manifestFile);\n\t\t\twatcher.on(\"change\", () => {\n\t\t\t\tthis.core.broadcast(\"meeseOS/packages:metadata:changed\");\n\t\t\t});\n\n\t\t\tthis.watches.push(watcher);\n\t\t}\n\t}\n}\n\nmodule.exports = PackageServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/packages.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 145,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/packages.js",
    "static": true,
    "longname": "src/providers/packages.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/providers/packages.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 146,
    "kind": "variable",
    "name": "closeWatches",
    "memberof": "src/providers/packages.js",
    "static": true,
    "longname": "src/providers/packages.js~closeWatches",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/providers/packages.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 38,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 147,
    "kind": "class",
    "name": "PackageServiceProvider",
    "memberof": "src/providers/packages.js",
    "static": true,
    "longname": "src/providers/packages.js~PackageServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/providers/packages.js",
    "importStyle": "PackageServiceProvider",
    "description": "MeeseOS Package Service Provider",
    "lineNumber": 43,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 148,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 48,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      }
    ]
  },
  {
    "__docId__": 149,
    "kind": "member",
    "name": "watches",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#watches",
    "access": "public",
    "description": null,
    "lineNumber": 61,
    "undocument": true,
    "type": {
      "types": [
        "*[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 150,
    "kind": "member",
    "name": "packages",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#packages",
    "access": "public",
    "description": null,
    "lineNumber": 62,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 151,
    "kind": "method",
    "name": "provides",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/providers/packages.js~PackageServiceProvider.provides",
    "access": "public",
    "description": null,
    "lineNumber": 68,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "string[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 152,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#init",
    "access": "public",
    "description": null,
    "lineNumber": 72,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 153,
    "kind": "method",
    "name": "start",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#start",
    "access": "public",
    "description": null,
    "lineNumber": 78,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 154,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 86,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 155,
    "kind": "method",
    "name": "initDeveloperTools",
    "memberof": "src/providers/packages.js~PackageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/packages.js~PackageServiceProvider#initDeveloperTools",
    "access": "public",
    "description": "Initializes some developer features.",
    "lineNumber": 95,
    "params": [],
    "return": null
  },
  {
    "__docId__": 156,
    "kind": "file",
    "name": "src/providers/settings.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst Settings = require(\"../settings\");\nconst { ServiceProvider } = require(\"@meese-os/common\");\n\n/**\n * MeeseOS Settings Service Provider\n */\nclass SettingsServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {Object} [options] Arguments\n\t */\n\tconstructor(core, options) {\n\t\tsuper(core, options);\n\n\t\tthis.settings = new Settings(core, options);\n\t}\n\n\t/**\n\t * Destroy instance.\n\t */\n\tdestroy() {\n\t\tthis.settings.destroy();\n\t\tsuper.destroy();\n\t}\n\n\t/**\n\t * Initialize instance.\n\t * @returns {Promise<Boolean>}\n\t */\n\tasync init() {\n\t\tthis.core\n\t\t\t.make(\"meeseOS/express\")\n\t\t\t.routeAuthenticated(\"post\", \"/settings\", (req, res) =>\n\t\t\t\tthis.settings.save(req, res)\n\t\t\t);\n\n\t\tthis.core\n\t\t\t.make(\"meeseOS/express\")\n\t\t\t.routeAuthenticated(\"get\", \"/settings\", (req, res) =>\n\t\t\t\tthis.settings.load(req, res)\n\t\t\t);\n\n\t\treturn this.settings.init();\n\t}\n}\n\nmodule.exports = SettingsServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/settings.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 157,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/settings.js",
    "static": true,
    "longname": "src/providers/settings.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/providers/settings.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 33,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 158,
    "kind": "class",
    "name": "SettingsServiceProvider",
    "memberof": "src/providers/settings.js",
    "static": true,
    "longname": "src/providers/settings.js~SettingsServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/providers/settings.js",
    "importStyle": "SettingsServiceProvider",
    "description": "MeeseOS Settings Service Provider",
    "lineNumber": 38,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 159,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/settings.js~SettingsServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/settings.js~SettingsServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 44,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "options",
        "description": "Arguments"
      }
    ]
  },
  {
    "__docId__": 160,
    "kind": "member",
    "name": "settings",
    "memberof": "src/providers/settings.js~SettingsServiceProvider",
    "static": false,
    "longname": "src/providers/settings.js~SettingsServiceProvider#settings",
    "access": "public",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 161,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/settings.js~SettingsServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/settings.js~SettingsServiceProvider#destroy",
    "access": "public",
    "description": "Destroy instance.",
    "lineNumber": 53,
    "params": [],
    "return": null
  },
  {
    "__docId__": 162,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/settings.js~SettingsServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/settings.js~SettingsServiceProvider#init",
    "access": "public",
    "description": "Initialize instance.",
    "lineNumber": 62,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 163,
    "kind": "file",
    "name": "src/providers/token-factory.js",
    "content": "/**\n * MeeseOS - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2022-Present, Aaron Meese <aaron@meese.dev>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n * \t and/or other materials provided with the distribution.\n * 3. Neither the name of the copyright holder nor the names of its contributors\n *    may be used to endorse or promote products derived from this software\n * \t without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Aaron Meese <aaron@meese.dev>\n * @licence Modified BSD License\n */\n\nconst { ServiceProvider } = require(\"@meese-os/common\");\nconst TokenFactory = require(\"../utils/token-factory\");\n\n/**\n * MeeseOS Token Factory Service Provider\n */\nclass TokenFactoryServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t */\n\tconstructor(core) {\n\t\tsuper(core);\n\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\t/**\n\t\t * @type {TokenFactory}\n\t\t */\n\t\tthis.tokenFactory = new TokenFactory(this.core);\n\t}\n\n\t/**\n\t * A list of services this provider depends on.\n\t * @returns {String[]}\n\t */\n\tdepends() {\n\t\treturn [\"meeseOS/token-storage\"];\n\t}\n\n\t/**\n\t * Get a list of services this provider registers.\n\t * @returns {String[]}\n\t */\n\tprovides() {\n\t\treturn [\"meeseOS/token-factory\"];\n\t}\n\n\t/**\n\t * Initializes provider.\n\t */\n\tasync init() {\n\t\tawait this.tokenFactory.init();\n\n\t\tthis.core.singleton(\"meeseOS/token-factory\", () => this.tokenFactory);\n\t}\n\n\t/**\n\t * Destroys provider.\n\t */\n\tdestroy() {\n\t\tsuper.destroy();\n\t}\n}\n\nmodule.exports = TokenFactoryServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/token-factory.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 164,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/token-factory.js",
    "static": true,
    "longname": "src/providers/token-factory.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/providers/token-factory.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 165,
    "kind": "class",
    "name": "TokenFactoryServiceProvider",
    "memberof": "src/providers/token-factory.js",
    "static": true,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/providers/token-factory.js",
    "importStyle": "TokenFactoryServiceProvider",
    "description": "MeeseOS Token Factory Service Provider",
    "lineNumber": 41,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 166,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 46,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      }
    ]
  },
  {
    "__docId__": 167,
    "kind": "member",
    "name": "core",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#core",
    "access": "public",
    "description": "",
    "lineNumber": 52,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 168,
    "kind": "member",
    "name": "tokenFactory",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#tokenFactory",
    "access": "public",
    "description": "",
    "lineNumber": 57,
    "type": {
      "nullable": null,
      "types": [
        "TokenFactory"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 169,
    "kind": "method",
    "name": "depends",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#depends",
    "access": "public",
    "description": "A list of services this provider depends on.",
    "lineNumber": 64,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 170,
    "kind": "method",
    "name": "provides",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#provides",
    "access": "public",
    "description": "Get a list of services this provider registers.",
    "lineNumber": 72,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 171,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#init",
    "access": "public",
    "description": "Initializes provider.",
    "lineNumber": 79,
    "params": [],
    "return": null
  },
  {
    "__docId__": 172,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/token-factory.js~TokenFactoryServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-factory.js~TokenFactoryServiceProvider#destroy",
    "access": "public",
    "description": "Destroys provider.",
    "lineNumber": 88,
    "params": [],
    "return": null
  },
  {
    "__docId__": 173,
    "kind": "file",
    "name": "src/providers/token-storage.js",
    "content": "/**\n * MeeseOS - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2022-Present, Aaron Meese <aaron@meese.dev>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n * \t and/or other materials provided with the distribution.\n * 3. Neither the name of the copyright holder nor the names of its contributors\n *    may be used to endorse or promote products derived from this software\n * \t without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Aaron Meese <aaron@meese.dev>\n * @licence Modified BSD License\n */\n\nconst { ServiceProvider } = require(\"@meese-os/common\");\nconst TokenStorage = require(\"../utils/token-storage\");\n\n/**\n * MeeseOS Token Storage Service Provider\n */\nclass TokenStorageServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {Object} [options={}] Arguments\n\t */\n\tconstructor(core, options = {}) {\n\t\tsuper(core, options);\n\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\t\tthis.options = options;\n\n\t\t/**\n\t\t * @type {TokenStorage}\n\t\t */\n\t\tthis.storage = new TokenStorage(this.core, this.options);\n\t}\n\n\t/**\n\t * Get a list of services this provider registers.\n\t * @returns {String[]}\n\t */\n\tprovides() {\n\t\treturn [\"meeseOS/token-storage\"];\n\t}\n\n\t/**\n\t * Initializes provider.\n\t */\n\tasync init() {\n\t\tawait this.storage.init();\n\n\t\tthis.core.singleton(\"meeseOS/token-storage\", () => this.storage);\n\t}\n\n\t/**\n\t * Destroys provider.\n\t */\n\tdestroy() {\n\t\tthis.storage.destroy();\n\t}\n}\n\nmodule.exports = TokenStorageServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/token-storage.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 174,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/token-storage.js",
    "static": true,
    "longname": "src/providers/token-storage.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/providers/token-storage.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 35,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 175,
    "kind": "class",
    "name": "TokenStorageServiceProvider",
    "memberof": "src/providers/token-storage.js",
    "static": true,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/providers/token-storage.js",
    "importStyle": "TokenStorageServiceProvider",
    "description": "MeeseOS Token Storage Service Provider",
    "lineNumber": 41,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 176,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 47,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Arguments"
      }
    ]
  },
  {
    "__docId__": 177,
    "kind": "member",
    "name": "core",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#core",
    "access": "public",
    "description": "",
    "lineNumber": 53,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 178,
    "kind": "member",
    "name": "options",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#options",
    "access": "public",
    "description": null,
    "lineNumber": 54,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 179,
    "kind": "member",
    "name": "storage",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#storage",
    "access": "public",
    "description": "",
    "lineNumber": 59,
    "type": {
      "nullable": null,
      "types": [
        "TokenStorage"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 180,
    "kind": "method",
    "name": "provides",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#provides",
    "access": "public",
    "description": "Get a list of services this provider registers.",
    "lineNumber": 66,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String[]}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String[]"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 181,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#init",
    "access": "public",
    "description": "Initializes provider.",
    "lineNumber": 73,
    "params": [],
    "return": null
  },
  {
    "__docId__": 182,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/token-storage.js~TokenStorageServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/token-storage.js~TokenStorageServiceProvider#destroy",
    "access": "public",
    "description": "Destroys provider.",
    "lineNumber": 82,
    "params": [],
    "return": null
  },
  {
    "__docId__": 183,
    "kind": "file",
    "name": "src/providers/vfs.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst { ServiceProvider } = require(\"@meese-os/common\");\nconst Filesystem = require(\"../filesystem\");\n\n/**\n * MeeseOS Virtual Filesystem Service Provider\n */\nclass VFSServiceProvider extends ServiceProvider {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {Object} [options={}] Arguments\n\t */\n\tconstructor(core, options = {}) {\n\t\tsuper(core, options);\n\n\t\tthis.filesystem = new Filesystem(core, options);\n\t}\n\n\tasync destroy() {\n\t\tawait this.filesystem.destroy();\n\t\tsuper.destroy();\n\t}\n\n\tstatic depends() {\n\t\treturn [\"meeseOS/express\"];\n\t}\n\n\tstatic provides() {\n\t\treturn [\"meeseOS/fs\", \"meeseOS/vfs\"];\n\t}\n\n\tasync init() {\n\t\tconst filesystem = this.filesystem;\n\n\t\tawait filesystem.init();\n\n\t\tthis.core.singleton(\"meeseOS/fs\", () => this.filesystem);\n\n\t\tthis.core.singleton(\"meeseOS/vfs\", () => ({\n\t\t\trealpath: (...args) => this.filesystem.realpath(...args),\n\t\t\trequest: (...args) => this.filesystem.request(...args),\n\t\t\tcall: (...args) => this.filesystem.call(...args),\n\t\t\tmime: (...args) => this.filesystem.mime(...args),\n\n\t\t\tget adapters() {\n\t\t\t\treturn filesystem.adapters;\n\t\t\t},\n\n\t\t\tget mountpoints() {\n\t\t\t\treturn filesystem.mountpoints;\n\t\t\t},\n\t\t}));\n\n\t\tthis.core.app.use(\"/vfs\", filesystem.router);\n\t}\n}\n\nmodule.exports = VFSServiceProvider;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/providers/vfs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 184,
    "kind": "variable",
    "name": "ServiceProvider",
    "memberof": "src/providers/vfs.js",
    "static": true,
    "longname": "src/providers/vfs.js~ServiceProvider",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/providers/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 32,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 185,
    "kind": "class",
    "name": "VFSServiceProvider",
    "memberof": "src/providers/vfs.js",
    "static": true,
    "longname": "src/providers/vfs.js~VFSServiceProvider",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/providers/vfs.js",
    "importStyle": "VFSServiceProvider",
    "description": "MeeseOS Virtual Filesystem Service Provider",
    "lineNumber": 38,
    "interface": false,
    "extends": [
      "ServiceProvider"
    ]
  },
  {
    "__docId__": 186,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/providers/vfs.js~VFSServiceProvider#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 44,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Arguments"
      }
    ]
  },
  {
    "__docId__": 187,
    "kind": "member",
    "name": "filesystem",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "static": false,
    "longname": "src/providers/vfs.js~VFSServiceProvider#filesystem",
    "access": "public",
    "description": null,
    "lineNumber": 47,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 188,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/vfs.js~VFSServiceProvider#destroy",
    "access": "public",
    "description": null,
    "lineNumber": 50,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 189,
    "kind": "method",
    "name": "depends",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/providers/vfs.js~VFSServiceProvider.depends",
    "access": "public",
    "description": null,
    "lineNumber": 55,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "string[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 190,
    "kind": "method",
    "name": "provides",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/providers/vfs.js~VFSServiceProvider.provides",
    "access": "public",
    "description": null,
    "lineNumber": 59,
    "undocument": true,
    "params": [],
    "return": {
      "types": [
        "string[]"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 191,
    "kind": "method",
    "name": "init",
    "memberof": "src/providers/vfs.js~VFSServiceProvider",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/providers/vfs.js~VFSServiceProvider#init",
    "access": "public",
    "description": null,
    "lineNumber": 63,
    "undocument": true,
    "params": [],
    "return": null,
    "ignore": true
  },
  {
    "__docId__": 192,
    "kind": "file",
    "name": "src/settings.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst nullAdapter = require(\"./adapters/settings/null\");\nconst fsAdapter = require(\"./adapters/settings/fs\");\n\n/**\n * TODO: typedef\n * @typedef {Object} SettingsAdapter\n */\n\n/**\n * Settings Service Options\n * @typedef {Object} SettingsOptions\n * @property {SettingsAdapter|string} [adapter]\n */\n\n/**\n * MeeseOS Settings Manager\n */\nclass Settings {\n\t/**\n\t * Create new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {SettingsOptions} [options={}] Instance options\n\t */\n\tconstructor(core, options = {}) {\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\tthis.options = {\n\t\t\tadapter: nullAdapter,\n\t\t\t...options,\n\t\t};\n\n\t\tif (this.options.adapter === \"fs\") {\n\t\t\tthis.options.adapter = fsAdapter;\n\t\t}\n\n\t\tthis.adapter = nullAdapter(core, this.options.config);\n\n\t\ttry {\n\t\t\tthis.adapter = this.options.adapter(core, this.options.config);\n\t\t} catch (e) {\n\t\t\tthis.core.logger.warn(e);\n\t\t}\n\t}\n\n\t/**\n\t * Initializes adapter.\n\t * @returns {Promise<Boolean>}\n\t */\n\tinit() {\n\t\tif (this.adapter.init) {\n\t\t\treturn this.adapter.init();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Sends save request to adapter.\n\t * @param {Request} req Express request\n\t * @param {Response} res Express response\n\t * @returns {Promise<undefined>}\n\t */\n\tasync save(req, res) {\n\t\tconst result = await this.adapter.save(req, res);\n\t\tres.json(result);\n\t}\n\n\t/**\n\t * Sends load request to adapter.\n\t * @param {Request} req Express request\n\t * @param {Response} res Express response\n\t * @returns {Promise<undefined>}\n\t */\n\tasync load(req, res) {\n\t\tconst result = await this.adapter.load(req, res);\n\t\tres.json(result);\n\t}\n\n\t/**\n\t * Destroy instance.\n\t */\n\tdestroy() {\n\t\tif (this.adapter.destroy) {\n\t\t\tthis.adapter.destroy();\n\t\t}\n\t}\n}\n\nmodule.exports = Settings;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/settings.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 193,
    "kind": "typedef",
    "name": "SettingsAdapter",
    "memberof": "src/settings.js",
    "static": true,
    "longname": "src/settings.js~SettingsAdapter",
    "access": "public",
    "description": "TODO: typedef",
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "SettingsAdapter"
    }
  },
  {
    "__docId__": 194,
    "kind": "typedef",
    "name": "SettingsOptions",
    "memberof": "src/settings.js",
    "static": true,
    "longname": "src/settings.js~SettingsOptions",
    "access": "public",
    "description": "Settings Service Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "SettingsAdapter",
          "string"
        ],
        "spread": false,
        "optional": true,
        "name": "adapter",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "SettingsOptions"
    }
  },
  {
    "__docId__": 195,
    "kind": "class",
    "name": "Settings",
    "memberof": "src/settings.js",
    "static": true,
    "longname": "src/settings.js~Settings",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/settings.js",
    "importStyle": "Settings",
    "description": "MeeseOS Settings Manager",
    "lineNumber": 48,
    "interface": false
  },
  {
    "__docId__": 196,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/settings.js~Settings",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/settings.js~Settings#constructor",
    "access": "public",
    "description": "Create new instance.",
    "lineNumber": 54,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "SettingsOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Instance options"
      }
    ]
  },
  {
    "__docId__": 197,
    "kind": "member",
    "name": "core",
    "memberof": "src/settings.js~Settings",
    "static": false,
    "longname": "src/settings.js~Settings#core",
    "access": "public",
    "description": "",
    "lineNumber": 58,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 198,
    "kind": "member",
    "name": "options",
    "memberof": "src/settings.js~Settings",
    "static": false,
    "longname": "src/settings.js~Settings#options",
    "access": "public",
    "description": null,
    "lineNumber": 60,
    "undocument": true,
    "type": {
      "types": [
        "{\"adapter\": *, ...options: Object}"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 199,
    "kind": "member",
    "name": "adapter",
    "memberof": "src/settings.js~Settings",
    "static": false,
    "longname": "src/settings.js~Settings#adapter",
    "access": "public",
    "description": null,
    "lineNumber": 69,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 201,
    "kind": "method",
    "name": "init",
    "memberof": "src/settings.js~Settings",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/settings.js~Settings#init",
    "access": "public",
    "description": "Initializes adapter.",
    "lineNumber": 82,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 202,
    "kind": "method",
    "name": "save",
    "memberof": "src/settings.js~Settings",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/settings.js~Settings#save",
    "access": "public",
    "description": "Sends save request to adapter.",
    "lineNumber": 96,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "Express request"
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "Express response"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 203,
    "kind": "method",
    "name": "load",
    "memberof": "src/settings.js~Settings",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/settings.js~Settings#load",
    "access": "public",
    "description": "Sends load request to adapter.",
    "lineNumber": 107,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<undefined>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": "Express request"
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": "Express response"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<undefined>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 204,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/settings.js~Settings",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/settings.js~Settings#destroy",
    "access": "public",
    "description": "Destroy instance.",
    "lineNumber": 115,
    "params": [],
    "return": null
  },
  {
    "__docId__": 205,
    "kind": "file",
    "name": "src/utils/token-factory.js",
    "content": "/**\n * MeeseOS - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2022-Present, Aaron Meese <aaron@meese.dev>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n * \t and/or other materials provided with the distribution.\n * 3. Neither the name of the copyright holder nor the names of its contributors\n *    may be used to endorse or promote products derived from this software\n * \t without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Aaron Meese <aaron@meese.dev>\n * @licence Modified BSD License\n */\n\nconst jwt = require(\"jsonwebtoken\");\n// eslint-disable-next-line no-unused-vars\nconst TokenStorage = require(\"../utils/token-storage\");\n\n/**\n * Token Factory Options\n * @typedef {Object} TokenFactoryOptions\n * @property {String} [accessTokenSecret]\n * @property {String} [refreshTokenSecret]\n * @property {String} [accessTokenDuration]\n */\n\n/**\n * JWT Token Factory\n */\nclass TokenFactory {\n\t/**\n\t * Creates a new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {TokenFactoryOptions} [options={}] Token Factory arguments\n\t */\n\tconstructor(core, options = {}) {\n\t\tconst {\n\t\t\taccessTokenSecret,\n\t\t\trefreshTokenSecret,\n\t\t\taccessTokenDuration\n\t\t} = core.configuration.session.jwt;\n\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\t/**\n\t\t * @type {TokenFactoryOptions}\n\t\t */\n\t\tthis.options = {\n\t\t\taccessTokenSecret,\n\t\t\trefreshTokenSecret,\n\t\t\taccessTokenDuration,\n\t\t\t...options,\n\t\t};\n\t}\n\n\t/**\n\t * Initializes adapter.\n\t * @returns {Promise<Boolean>}\n\t */\n\tasync init() {\n\t\t/**\n\t\t * @type {TokenStorage}\n\t\t */\n\t\tthis.storage = this.core.make(\"meeseOS/token-storage\");\n\n\t\tawait this.storage.init();\n\n\t\treturn true;\n\t}\n\n\t/**\n\t * Creates an access token for a user.\n\t * @param {String} username The user's username\n\t * @param {Array} groups The user's groups\n\t * @returns {String} The access token\n\t */\n\tcreateAccessToken(username, groups) {\n\t\treturn jwt.sign(\n\t\t\t{ username, groups: JSON.stringify(groups) },\n\t\t\tthis.options.accessTokenSecret,\n\t\t\t{ expiresIn: this.options.accessTokenDuration }\n\t\t);\n\t}\n\n\t/**\n\t * Validates an access token.\n\t * @param {String} accessToken The access token to validate\n\t * @returns {Promise<Boolean|Object>} The user if valid, otherwise `false`\n\t */\n\tvalidateAccessToken(accessToken) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tjwt.verify(accessToken, this.options.accessTokenSecret, (err, user) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(user);\n\t\t\t\t}\n\t\t\t});\n\t\t}).catch((error) => {\n\t\t\tthis.core.logger.warn(\"Access token validation error:\", error);\n\t\t\treturn false;\n\t\t});\n\t}\n\n\t/**\n\t * Creates a refresh token for a user.\n\t * @param {String} username The user's username\n\t * @param {Array} groups The user's groups\n\t * @returns {String} The refresh token\n\t */\n\tcreateRefreshToken(username, groups) {\n\t\treturn jwt.sign(\n\t\t\t{ username, groups: JSON.stringify(groups) },\n\t\t\tthis.options.refreshTokenSecret\n\t\t);\n\t}\n\n\t/**\n\t * Validates a refresh token.\n\t * @param {String} refreshToken The refresh token to validate\n\t * @returns {Promise<Boolean|Object>} The user if valid, otherwise `false`\n\t */\n\tvalidateRefreshToken(refreshToken) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tjwt.verify(refreshToken, this.options.refreshTokenSecret, (err, user) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treject(err);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(user);\n\t\t\t\t}\n\t\t\t});\n\t\t}).catch((error) => {\n\t\t\tthis.core.logger.warn(\"Refresh token validation error:\", error);\n\t\t\treturn false;\n\t\t});\n\t}\n\n\t/**\n\t * Uses a refresh token to create a new access token, then returns the\n\t * associated user profile along with the new access token.\n\t * @param {String} refreshToken Refresh token\n\t * @returns {Promise<*>}\n\t */\n\trefreshToAccessToken(refreshToken) {\n\t\t// Need to ensure that the refreshToken hasn't been revoked\n\t\tif (!refreshToken || !this.storage.find(refreshToken)) {\n\t\t\treturn false;\n\t\t}\n\n\t\t/* eslint-disable no-async-promise-executor */\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tconst tokenInStorage = this.storage.find(refreshToken);\n\t\t\tif (!tokenInStorage) {\n\t\t\t\treturn reject(new Error(\"Token not found\"));\n\t\t\t}\n\n\t\t\tconst user = await this.validateRefreshToken(refreshToken);\n\t\t\tif (!user) {\n\t\t\t\tthis.storage.remove(refreshToken);\n\t\t\t\treturn reject(new Error(\"Token not valid\"));\n\t\t\t}\n\n\t\t\tconst accessToken = this.createAccessToken(\n\t\t\t\tuser.username,\n\t\t\t\tuser.groups\n\t\t\t);\n\n\t\t\tresolve({ ...user, accessToken });\n\t\t}).catch((error) => {\n\t\t\tthis.core.logger.error(error);\n\t\t\treturn false;\n\t\t});\n\t\t/* eslint-enable no-async-promise-executor */\n\t}\n}\n\nmodule.exports = TokenFactory;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/utils/token-factory.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 206,
    "kind": "typedef",
    "name": "TokenFactoryOptions",
    "memberof": "src/utils/token-factory.js",
    "static": true,
    "longname": "src/utils/token-factory.js~TokenFactoryOptions",
    "access": "public",
    "description": "Token Factory Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "accessTokenSecret",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "refreshTokenSecret",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "accessTokenDuration",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "TokenFactoryOptions"
    }
  },
  {
    "__docId__": 207,
    "kind": "class",
    "name": "TokenFactory",
    "memberof": "src/utils/token-factory.js",
    "static": true,
    "longname": "src/utils/token-factory.js~TokenFactory",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/token-factory.js",
    "importStyle": "TokenFactory",
    "description": "JWT Token Factory",
    "lineNumber": 49,
    "interface": false
  },
  {
    "__docId__": 208,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#constructor",
    "access": "public",
    "description": "Creates a new instance.",
    "lineNumber": 55,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "TokenFactoryOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Token Factory arguments"
      }
    ]
  },
  {
    "__docId__": 209,
    "kind": "member",
    "name": "core",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#core",
    "access": "public",
    "description": "",
    "lineNumber": 65,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 210,
    "kind": "member",
    "name": "options",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#options",
    "access": "public",
    "description": "",
    "lineNumber": 70,
    "type": {
      "nullable": null,
      "types": [
        "TokenFactoryOptions"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 211,
    "kind": "method",
    "name": "init",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": true,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#init",
    "access": "public",
    "description": "Initializes adapter.",
    "lineNumber": 82,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 212,
    "kind": "member",
    "name": "storage",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#storage",
    "access": "public",
    "description": "",
    "lineNumber": 86,
    "type": {
      "nullable": null,
      "types": [
        "TokenStorage"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 213,
    "kind": "method",
    "name": "createAccessToken",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#createAccessToken",
    "access": "public",
    "description": "Creates an access token for a user.",
    "lineNumber": 99,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String} The access token"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "username",
        "description": "The user's username"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "groups",
        "description": "The user's groups"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "The access token"
    }
  },
  {
    "__docId__": 214,
    "kind": "method",
    "name": "validateAccessToken",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#validateAccessToken",
    "access": "public",
    "description": "Validates an access token.",
    "lineNumber": 112,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean|Object>} The user if valid, otherwise `false`"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "accessToken",
        "description": "The access token to validate"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean|Object>"
      ],
      "spread": false,
      "description": "The user if valid, otherwise `false`"
    }
  },
  {
    "__docId__": 215,
    "kind": "method",
    "name": "createRefreshToken",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#createRefreshToken",
    "access": "public",
    "description": "Creates a refresh token for a user.",
    "lineNumber": 133,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String} The refresh token"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "username",
        "description": "The user's username"
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "groups",
        "description": "The user's groups"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": "The refresh token"
    }
  },
  {
    "__docId__": 216,
    "kind": "method",
    "name": "validateRefreshToken",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#validateRefreshToken",
    "access": "public",
    "description": "Validates a refresh token.",
    "lineNumber": 145,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean|Object>} The user if valid, otherwise `false`"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "refreshToken",
        "description": "The refresh token to validate"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean|Object>"
      ],
      "spread": false,
      "description": "The user if valid, otherwise `false`"
    }
  },
  {
    "__docId__": 217,
    "kind": "method",
    "name": "refreshToAccessToken",
    "memberof": "src/utils/token-factory.js~TokenFactory",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-factory.js~TokenFactory#refreshToAccessToken",
    "access": "public",
    "description": "Uses a refresh token to create a new access token, then returns the\nassociated user profile along with the new access token.",
    "lineNumber": 166,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<*>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "refreshToken",
        "description": "Refresh token"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<*>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 218,
    "kind": "file",
    "name": "src/utils/token-storage.js",
    "content": "/**\n * MeeseOS - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2022-Present, Aaron Meese <aaron@meese.dev>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer.\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n * \t and/or other materials provided with the distribution.\n * 3. Neither the name of the copyright holder nor the names of its contributors\n *    may be used to endorse or promote products derived from this software\n * \t without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Aaron Meese <aaron@meese.dev>\n * @licence Modified BSD License\n */\n\nconst loki = require(\"lokijs\");\n\n/**\n * Token Storage Options\n * @typedef {Object} TokenStorageOptions\n * @property {String} [databaseName]\n * @property {String} [collectionName]\n * @property {Object} [databaseOptions]\n */\n\n/**\n * Token Storage\n */\nclass TokenStorage {\n\t/**\n\t * Creates a new instance.\n\t * @param {Core} core MeeseOS Core instance reference\n\t * @param {TokenStorageOptions} [options={}] Token Storage arguments\n\t */\n\tconstructor(core, options = {}) {\n\t\t/**\n\t\t * @type {Core}\n\t\t */\n\t\tthis.core = core;\n\n\t\t/**\n\t\t * @type {TokenStorageOptions}\n\t\t */\n\t\tthis.options = {\n\t\t\t...this.core.configuration.session.store,\n\t\t\t...options,\n\t\t};\n\t}\n\n\t/**\n\t * Initializes the instance.\n\t * @returns {Promise<void>}\n\t */\n\tinit() {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst databaseOptions = {\n\t\t\t\t...this.options.databaseOptions,\n\t\t\t};\n\n\t\t\t// If autoload is enabled, wrap the callback to resolve the promise\n\t\t\tif (databaseOptions.autoload) {\n\t\t\t\tconst originalCallback = databaseOptions.autoloadCallback;\n\t\t\t\tdatabaseOptions.autoloadCallback = () => {\n\t\t\t\t\t// Returns the collection if it exists, otherwise creates it\n\t\t\t\t\tlet collection = this.db.getCollection(this.options.collectionName);\n\t\t\t\t\tif (!collection) {\n\t\t\t\t\t\tcollection = this.db.addCollection(this.options.collectionName);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.collection = collection;\n\n\t\t\t\t\t// Call original callback if provided\n\t\t\t\t\tif (originalCallback) {\n\t\t\t\t\t\toriginalCallback();\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve();\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tthis.db = new loki(\n\t\t\t\tthis.options.databaseName,\n\t\t\t\tdatabaseOptions,\n\t\t\t);\n\n\t\t\t// If autoload is disabled, create collection immediately\n\t\t\tif (!databaseOptions.autoload) {\n\t\t\t\tlet collection = this.db.getCollection(this.options.collectionName);\n\t\t\t\tif (!collection) {\n\t\t\t\t\tcollection = this.db.addCollection(this.options.collectionName);\n\t\t\t\t}\n\n\t\t\t\tthis.collection = collection;\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Looks for a refresh token in the database and returns it if found.\n\t * @param {String} refreshToken The refresh token to look for\n\t * @returns {Object|null} The token if found or `null` if not\n\t */\n\tfind(refreshToken) {\n\t\treturn this.collection.findOne({ refreshToken });\n\t}\n\n\t/**\n\t * Adds a refresh token to the database.\n\t * @param {String} refreshToken The refresh token to add\n\t */\n\tcreate(refreshToken) {\n\t\t// The timestamp is used to make pruning old data easier\n\t\tconst timestamp = new Date().getTime();\n\t\tthis.collection.insert({ refreshToken, timestamp });\n\t}\n\n\t/**\n\t * Removes a refresh token from the database.\n\t * @param {String} refreshToken The refresh token to remove\n\t * @returns {Promise<Boolean>} `true` if the token was removed, otherwise `false`\n\t */\n\tremove(refreshToken) {\n\t\tconst row = this.collection.findOne({ refreshToken });\n\t\tif (row) {\n\t\t\tthis.collection.remove(row);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * Destroys the instance.\n\t */\n\tdestroy() {\n\t\tif (this.db) {\n\t\t\tthis.db.close();\n\t\t}\n\t}\n}\n\nmodule.exports = TokenStorage;\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/utils/token-storage.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 219,
    "kind": "typedef",
    "name": "TokenStorageOptions",
    "memberof": "src/utils/token-storage.js",
    "static": true,
    "longname": "src/utils/token-storage.js~TokenStorageOptions",
    "access": "public",
    "description": "Token Storage Options",
    "properties": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "databaseName",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": true,
        "name": "collectionName",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": true,
        "name": "databaseOptions",
        "description": ""
      }
    ],
    "type": {
      "types": [
        "Object"
      ],
      "optional": false,
      "name": "TokenStorageOptions"
    }
  },
  {
    "__docId__": 220,
    "kind": "class",
    "name": "TokenStorage",
    "memberof": "src/utils/token-storage.js",
    "static": true,
    "longname": "src/utils/token-storage.js~TokenStorage",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/token-storage.js",
    "importStyle": "TokenStorage",
    "description": "Token Storage",
    "lineNumber": 47,
    "interface": false
  },
  {
    "__docId__": 221,
    "kind": "constructor",
    "name": "constructor",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#constructor",
    "access": "public",
    "description": "Creates a new instance.",
    "lineNumber": 53,
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      },
      {
        "nullable": null,
        "types": [
          "TokenStorageOptions"
        ],
        "spread": false,
        "optional": true,
        "defaultValue": "{}",
        "defaultRaw": {},
        "name": "options",
        "description": "Token Storage arguments"
      }
    ]
  },
  {
    "__docId__": 222,
    "kind": "member",
    "name": "core",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#core",
    "access": "public",
    "description": "",
    "lineNumber": 57,
    "type": {
      "nullable": null,
      "types": [
        "Core"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 223,
    "kind": "member",
    "name": "options",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#options",
    "access": "public",
    "description": "",
    "lineNumber": 62,
    "type": {
      "nullable": null,
      "types": [
        "TokenStorageOptions"
      ],
      "spread": false,
      "description": null
    }
  },
  {
    "__docId__": 224,
    "kind": "method",
    "name": "init",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#init",
    "access": "public",
    "description": "Initializes the instance.",
    "lineNumber": 72,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<void>}"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<void>"
      ],
      "spread": false,
      "description": ""
    },
    "params": []
  },
  {
    "__docId__": 225,
    "kind": "member",
    "name": "collection",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#collection",
    "access": "public",
    "description": null,
    "lineNumber": 88,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 226,
    "kind": "member",
    "name": "db",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#db",
    "access": "public",
    "description": null,
    "lineNumber": 99,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 228,
    "kind": "method",
    "name": "find",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#find",
    "access": "public",
    "description": "Looks for a refresh token in the database and returns it if found.",
    "lineNumber": 122,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object|null} The token if found or `null` if not"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "refreshToken",
        "description": "The refresh token to look for"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object",
        "null"
      ],
      "spread": false,
      "description": "The token if found or `null` if not"
    }
  },
  {
    "__docId__": 229,
    "kind": "method",
    "name": "create",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#create",
    "access": "public",
    "description": "Adds a refresh token to the database.",
    "lineNumber": 130,
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "refreshToken",
        "description": "The refresh token to add"
      }
    ],
    "return": null
  },
  {
    "__docId__": 230,
    "kind": "method",
    "name": "remove",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#remove",
    "access": "public",
    "description": "Removes a refresh token from the database.",
    "lineNumber": 141,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Boolean>} `true` if the token was removed, otherwise `false`"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "refreshToken",
        "description": "The refresh token to remove"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Boolean>"
      ],
      "spread": false,
      "description": "`true` if the token was removed, otherwise `false`"
    }
  },
  {
    "__docId__": 231,
    "kind": "method",
    "name": "destroy",
    "memberof": "src/utils/token-storage.js~TokenStorage",
    "generator": false,
    "async": false,
    "static": false,
    "longname": "src/utils/token-storage.js~TokenStorage#destroy",
    "access": "public",
    "description": "Destroys the instance.",
    "lineNumber": 154,
    "params": [],
    "return": null
  },
  {
    "__docId__": 232,
    "kind": "file",
    "name": "src/utils/vfs.js",
    "content": "/**\n * OS.js - JavaScript Cloud/Web Desktop Platform\n *\n * Copyright (c) 2011-Present, Anders Evenrud <andersevenrud@gmail.com>\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n *    list of conditions and the following disclaimer\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n *    this list of conditions and the following disclaimer in the documentation\n *    and/or other materials provided with the distribution\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR\n * ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n *\n * @author  Anders Evenrud <andersevenrud@gmail.com>\n * @licence Simplified BSD License\n */\n\nconst fs = require(\"fs-extra\");\nconst url = require(\"url\");\nconst sanitizeFilename = require(\"sanitize-filename\");\nconst formidable = require(\"formidable\");\nconst { Stream } = require(\"stream\");\n\n/**\n * A map of error codes.\n */\nconst errorCodes = {\n\tENOENT: 404,\n\tEACCES: 401,\n};\n\n/**\n * Gets prefix of a VFS path.\n * @param {String} path\n * @returns {String}\n */\nconst getPrefix = (path) => String(path).split(\":\")[0];\n\n/**\n * Sanitizes a path.\n * @param {String|Array} path\n * @returns {String}\n */\nconst sanitize = (path) => {\n\t// Handle an array of strings\n\tif (Array.isArray(path)) {\n\t\treturn path.map((singlePath) => sanitize(singlePath));\n\t}\n\n\t// Handle a single string\n\tconst [name, str] = (\n\t\tpath.replace(/\\/+/g, \"/\").match(/^([\\w-_]+):+(.*)/) || []\n\t).slice(1);\n\n\tconst sane = str\n\t\t.split(\"/\")\n\t\t.map((s) => sanitizeFilename(s))\n\t\t.join(\"/\")\n\t\t.replace(/\\/+/g, \"/\");\n\n\treturn name + \":\" + sane;\n};\n\n/**\n * Gets the stream from an HTTP request.\n * @param {Request} req\n */\nconst streamFromRequest = (req) => {\n\tconst isStream = req.files.upload instanceof Stream;\n\tif (isStream) return req.files.upload;\n\n\tconst filePath = req.files.upload.filepath || req.files.upload.path;\n\tif (!filePath) {\n\t\tthrow new Error(\"File path is empty or undefined.\");\n\t}\n\n\treturn fs.createReadStream(filePath);\n};\n\n/**\n * @param {Array} arr\n * @param {Array} compare\n * @param {Boolean} strict\n * @returns {Boolean}\n */\nconst validateAll = (arr, compare, strict = true) =>\n\tarr[strict ? \"every\" : \"some\"]((g) => compare.indexOf(g) !== -1);\n\n/**\n * Validates array groups.\n *\n * @param {Array} groups\n * @param {Array} userGroups\n * @param {Boolean} strict\n * @returns {Boolean}\n */\nconst validateNamedGroups = (groups, userGroups, strict) => {\n\tconst namedGroups = groups.filter((g) => typeof g === \"string\");\n\n\treturn namedGroups.length\n\t\t? validateAll(namedGroups, userGroups, strict)\n\t\t: true;\n};\n\n/**\n * Validates map of groups based on method:[group,...]\n *\n * @param {Array} groups\n * @param {Array} userGroups\n * @param {String} method\n * @param {Boolean} strict\n * @returns {Boolean}\n */\nconst validateMethodGroups = (groups, userGroups, method, strict) => {\n\tconst methodGroups = groups.find((g) =>\n\t\ttypeof g === \"string\" ? false : method in g\n\t);\n\n\treturn methodGroups\n\t\t? validateAll(methodGroups[method], userGroups, strict)\n\t\t: true;\n};\n\n/**\n * Validates groups.\n *\n * @param {Array} userGroups\n * @param {String} method\n * @param {Object} mountpoint\n * @param {Boolean} strict\n * @returns {Boolean}\n */\nconst validateGroups = (userGroups, method, mountpoint, strict) => {\n\tconst groups = mountpoint.attributes.groups || [];\n\tif (groups.length) {\n\t\tconst namedValid = validateNamedGroups(groups, userGroups, strict);\n\t\tconst methodValid = validateMethodGroups(\n\t\t\tgroups,\n\t\t\tuserGroups,\n\t\t\tmethod,\n\t\t\tstrict\n\t\t);\n\n\t\treturn namedValid && methodValid;\n\t}\n\n\treturn true;\n};\n\n/**\n * Checks permissions for given mountpoint.\n *\n * @param {Request} req\n * @param {Response} res\n * @param {String} method\n * @param {Boolean} readOnly\n * @param {Boolean} strict\n */\nconst checkMountpointPermission = (req, res, method, readOnly, strict) => {\n\tconst userGroups = req.session.user.groups;\n\n\treturn ({ mount }) => {\n\t\tif (readOnly) {\n\t\t\tconst { attributes, name } = mount;\n\n\t\t\tif (attributes.readOnly) {\n\t\t\t\tconst failed = typeof readOnly === \"function\"\n\t\t\t\t\t? getPrefix(readOnly(req, res)) === name\n\t\t\t\t\t: readOnly;\n\n\t\t\t\tif (failed) {\n\t\t\t\t\treturn Promise.reject(\n\t\t\t\t\t\tcreateError(403, `Mountpoint '${name}' is read-only`)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (validateGroups(userGroups, method, mount, strict)) {\n\t\t\treturn Promise.resolve(true);\n\t\t}\n\n\t\treturn Promise.reject(\n\t\t\tcreateError(\n\t\t\t\t403,\n\t\t\t\t`Permission was denied for '${method}' in '${mount.name}'`\n\t\t\t)\n\t\t);\n\t};\n};\n\n/**\n * Creates a new custom Error.\n * @param {Number} code\n * @param {String} message\n * @return {Error}\n */\nconst createError = (code, message) => {\n\tconst error = new Error(message);\n\terror.code = code;\n\treturn error;\n};\n\n/**\n * Resolves a mountpoint.\n * @param {Core} core MeeseOS Core instance reference\n * @returns {Object}\n */\nconst mountpointResolver = (core) =>\n\tasync (path) => {\n\t\tconst { adapters, mountpoints } = core.make(\"meeseOS/vfs\");\n\t\tconst prefix = getPrefix(path);\n\t\tconst mount = mountpoints.find((m) => m.name === prefix);\n\n\t\tif (!mount) {\n\t\t\tthrow createError(403, `Mountpoint not found for '${prefix}'`);\n\t\t}\n\n\t\tconst adapter = await (mount.adapter\n\t\t\t? adapters[mount.adapter]\n\t\t\t: adapters.system);\n\n\t\treturn Object.freeze({ mount, adapter });\n\t};\n\n/**\n * Parses URL body.\n * @param {Request} req\n * @returns {Promise<Object>}\n */\nconst parseGet = (req) => {\n\t// skipcq: JS-0272\n\tconst { query } = url.parse(req.url, true);\n\n\treturn Promise.resolve({ fields: query, files: {} });\n};\n\n/**\n * Parses JSON body.\n * @param {Request} req\n * @returns {Object|Boolean}\n */\nconst parseJson = (req) => {\n\tconst isJson = req.headers[\"content-type\"] &&\n\t\treq.headers[\"content-type\"].indexOf(\"application/json\") !== -1;\n\n\tif (isJson) {\n\t\treturn { fields: req.body, files: {} };\n\t}\n\n\treturn false;\n};\n\n/**\n * Parses form body.\n *\n * @param {Request} req\n * @param {Number} config.maxFieldsSize\n * @param {Number} config.maxFileSize\n * @returns {Promise<any>}\n */\nconst parseFormData = (req, { maxFieldsSize, maxFileSize }) => {\n\tconst form = formidable({\n\t\tmultiples: true,\n\t\tmaxFieldsSize,\n\t\tmaxFileSize,\n\t});\n\n\treturn new Promise((resolve, reject) => {\n\t\tform.parse(req, (err, fields, files) => {\n\t\t\treturn err ? reject(err) : resolve({ fields, files });\n\t\t});\n\t});\n};\n\n/**\n * Middleware for handling HTTP requests.\n * @param {Object} config\n * @returns {Promise<any>}\n */\nconst parseFields = (config) =>\n\t(req, _res) => {\n\t\tif ([\"get\", \"head\"].indexOf(req.method.toLowerCase()) !== -1) {\n\t\t\treturn Promise.resolve(parseGet(req));\n\t\t}\n\n\t\tconst json = parseJson(req);\n\t\tif (json) return Promise.resolve(json);\n\n\t\treturn parseFormData(req, config);\n\t};\n\n/**\n * A map of methods and their arguments.\n * Used for direct access via API.\n */\nconst methodArguments = {\n\trealpath: [\"path\"],\n\texists: [\"path\"],\n\tstat: [\"path\"],\n\treaddir: [\"path\"],\n\treadfile: [\"path\"],\n\twritefile: [\"path\", (upload) => ({ upload })],\n\tmkdir: [\"path\"],\n\tunlink: [\"path\"],\n\ttouch: [\"path\"],\n\tsearch: [\"root\", \"pattern\"],\n\tcopy: [\"from\", \"to\"],\n\trename: [\"from\", \"to\"],\n\tarchive: [\"selection\"],\n};\n\nmodule.exports = {\n\tmountpointResolver,\n\tcreateError,\n\tcheckMountpointPermission,\n\tvalidateGroups,\n\tstreamFromRequest,\n\tsanitize,\n\tgetPrefix,\n\tparseFields,\n\terrorCodes,\n\tmethodArguments,\n};\n",
    "static": true,
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/src/utils/vfs.js",
    "access": "public",
    "description": null,
    "lineNumber": 1
  },
  {
    "__docId__": 233,
    "kind": "variable",
    "name": "Stream",
    "memberof": "src/utils/vfs.js",
    "static": true,
    "longname": "src/utils/vfs.js~Stream",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": null,
    "description": null,
    "lineNumber": 36,
    "undocument": true,
    "type": {
      "types": [
        "*"
      ]
    },
    "ignore": true
  },
  {
    "__docId__": 234,
    "kind": "function",
    "name": "validateAll",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~validateAll",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "",
    "lineNumber": 100,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "arr",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "compare",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "strict",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 235,
    "kind": "function",
    "name": "validateNamedGroups",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~validateNamedGroups",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "Validates array groups.",
    "lineNumber": 111,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "groups",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "userGroups",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "strict",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 236,
    "kind": "function",
    "name": "validateMethodGroups",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~validateMethodGroups",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "Validates map of groups based on method:[group,...]",
    "lineNumber": 128,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "groups",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "userGroups",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "strict",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 237,
    "kind": "function",
    "name": "parseGet",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~parseGet",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "Parses URL body.",
    "lineNumber": 245,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<Object>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<Object>"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 238,
    "kind": "function",
    "name": "parseJson",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~parseJson",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "Parses JSON body.",
    "lineNumber": 257,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object|Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object",
        "Boolean"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 239,
    "kind": "function",
    "name": "parseFormData",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~parseFormData",
    "access": "public",
    "export": false,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": null,
    "description": "Parses form body.",
    "lineNumber": 276,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<any>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Number"
        ],
        "spread": false,
        "optional": false,
        "name": "config.maxFieldsSize",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Number"
        ],
        "spread": false,
        "optional": false,
        "name": "config.maxFileSize",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<any>"
      ],
      "spread": false,
      "description": ""
    },
    "ignore": true
  },
  {
    "__docId__": 240,
    "kind": "function",
    "name": "mountpointResolver",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~mountpointResolver",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": "{mountpointResolver}",
    "description": "Resolves a mountpoint.",
    "lineNumber": 223,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Object}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Core"
        ],
        "spread": false,
        "optional": false,
        "name": "core",
        "description": "MeeseOS Core instance reference"
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Object"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 241,
    "kind": "function",
    "name": "createError",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~createError",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": "{createError}",
    "description": "Creates a new custom Error.",
    "lineNumber": 212,
    "params": [
      {
        "nullable": null,
        "types": [
          "Number"
        ],
        "spread": false,
        "optional": false,
        "name": "code",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "message",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Error"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 242,
    "kind": "function",
    "name": "checkMountpointPermission",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~checkMountpointPermission",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": "{checkMountpointPermission}",
    "description": "Checks permissions for given mountpoint.",
    "lineNumber": 173,
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Response"
        ],
        "spread": false,
        "optional": false,
        "name": "res",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "readOnly",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "strict",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 243,
    "kind": "function",
    "name": "validateGroups",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~validateGroups",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": "{validateGroups}",
    "description": "Validates groups.",
    "lineNumber": 147,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Boolean}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "userGroups",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "method",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "mountpoint",
        "description": ""
      },
      {
        "nullable": null,
        "types": [
          "Boolean"
        ],
        "spread": false,
        "optional": false,
        "name": "strict",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Boolean"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 244,
    "kind": "function",
    "name": "streamFromRequest",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~streamFromRequest",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": "{streamFromRequest}",
    "description": "Gets the stream from an HTTP request.",
    "lineNumber": 82,
    "params": [
      {
        "nullable": null,
        "types": [
          "Request"
        ],
        "spread": false,
        "optional": false,
        "name": "req",
        "description": ""
      }
    ],
    "return": {
      "types": [
        "*"
      ]
    }
  },
  {
    "__docId__": 245,
    "kind": "function",
    "name": "sanitize",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~sanitize",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": "{sanitize}",
    "description": "Sanitizes a path.",
    "lineNumber": 58,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String",
          "Array"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 246,
    "kind": "function",
    "name": "getPrefix",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~getPrefix",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": "{getPrefix}",
    "description": "Gets prefix of a VFS path.",
    "lineNumber": 51,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{String}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "String"
        ],
        "spread": false,
        "optional": false,
        "name": "path",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "String"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 247,
    "kind": "function",
    "name": "parseFields",
    "memberof": "src/utils/vfs.js",
    "generator": false,
    "async": false,
    "static": true,
    "longname": "src/utils/vfs.js~parseFields",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": "{parseFields}",
    "description": "Middleware for handling HTTP requests.",
    "lineNumber": 295,
    "unknown": [
      {
        "tagName": "@returns",
        "tagValue": "{Promise<any>}"
      }
    ],
    "params": [
      {
        "nullable": null,
        "types": [
          "Object"
        ],
        "spread": false,
        "optional": false,
        "name": "config",
        "description": ""
      }
    ],
    "return": {
      "nullable": null,
      "types": [
        "Promise<any>"
      ],
      "spread": false,
      "description": ""
    }
  },
  {
    "__docId__": 248,
    "kind": "variable",
    "name": "errorCodes",
    "memberof": "src/utils/vfs.js",
    "static": true,
    "longname": "src/utils/vfs.js~errorCodes",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": "{errorCodes}",
    "description": "A map of error codes.",
    "lineNumber": 41,
    "type": {
      "types": [
        "{\"ENOENT\": number, \"EACCES\": number}"
      ]
    }
  },
  {
    "__docId__": 249,
    "kind": "variable",
    "name": "methodArguments",
    "memberof": "src/utils/vfs.js",
    "static": true,
    "longname": "src/utils/vfs.js~methodArguments",
    "access": "public",
    "export": true,
    "importPath": "@meese-os/server/src/utils/vfs.js",
    "importStyle": "{methodArguments}",
    "description": "A map of methods and their arguments.\nUsed for direct access via API.",
    "lineNumber": 311,
    "type": {
      "types": [
        "{\"realpath\": *, \"exists\": *, \"stat\": *, \"readdir\": *, \"readfile\": *, \"writefile\": *, \"mkdir\": *, \"unlink\": *, \"touch\": *, \"search\": *, \"copy\": *, \"rename\": *, \"archive\": *}"
      ]
    }
  },
  {
    "kind": "index",
    "content": "# MeeseOS Server\n\nThis is the main node server module for MeeseOS.\n\nContains all services and interfaces required to run a node server for MeeseOS.\n\n## VFS Chain\n\n<!-- https://mermaid-js.github.io/mermaid/#/flowchart -->\n```mermaid\nflowchart TD\n\tsubgraph Client\n\t\tdirection LR\n\t\tA1[\"Application\"] --> B1[\"VFS function call\"] --> C1[\"VFS Client Adapter\"] --> D1[\"HTTP Request\"]\n\tend\n\tsubgraph Server\n\t\tdirection LR\n\t\tA2[\"HTTP endpoint matching VFS function name\"] --> B2[\"VFS Server Adapter\"] --> C2[\"Actual Filesystem\"]\n\tend\n\n\tClient --> Server\n```\n\nThe client always represents stuff with virtual paths, wihch the VFS server adapter is able to resolve to access a physical filesystem.\n\nThe APIs are not limited to the MeeseOS server. A VFS client adapter can theoretically connect to anything as long as the file objects have the correct shape.\n",
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/README.md",
    "name": "./README.md",
    "static": true,
    "access": "public"
  },
  {
    "kind": "packageJSON",
    "content": "{\n  \"name\": \"@meese-os/server\",\n  \"version\": \"1.2.0\",\n  \"description\": \"meeseOS Server\",\n  \"scripts\": {\n    \"build\": \"echo \\\"There is no build command for server\\\" && exit 0\",\n    \"eslint\": \"eslint index.js src\",\n    \"jest\": \"jest --detectOpenHandles --forceExit\",\n    \"jest:debug\": \"jest --runInBand --silent false --verbose true --useStderr=true --detectOpenHandles --forceExit\",\n\t\t\"coverage\": \"jest --coverage\",\n    \"test\": \"npm run eslint && npm run jest\",\n    \"prepublishOnly\": \"npm run test\"\n  },\n  \"license\": \"BSD-2-Clause\",\n  \"main\": \"index.js\",\n  \"files\": [\n    \"src/\",\n    \"index.js\",\n    \"README.md\"\n  ],\n  \"engines\": {\n    \"node\": \">=12.0.0\"\n  },\n  \"devDependencies\": {\n    \"@meese-os/eslint-config\": \"workspace:*\",\n    \"eslint\": \"^9.39.2\",\n    \"eslint-plugin-jest\": \"^29.5.0\",\n    \"jest-express\": \"^1.12.0\",\n    \"temp\": \"^0.9.4\",\n    \"jest\": \"^30.2.0\"\n  },\n  \"dependencies\": {\n    \"@meese-os/common\": \"workspace:*\",\n    \"body-parser\": \"^2.2.1\",\n    \"chokidar\": \"^3.6.0\",\n    \"connect-loki\": \"^1.2.0\",\n    \"consola\": \"^3.4.2\",\n    \"deepmerge\": \"^4.3.1\",\n    \"express\": \"^5.2.1\",\n    \"express-http-proxy\": \"^2.1.2\",\n    \"express-session\": \"^1.18.2\",\n    \"express-ws\": \"^5.0.2\",\n    \"extract-zip\": \"^2.0.1\",\n    \"fast-glob\": \"^3.3.3\",\n    \"filehound\": \"^1.17.6\",\n    \"formidable\": \"^3.5.4\",\n    \"fs-extra\": \"^11.3.2\",\n    \"helmet\": \"^8.1.0\",\n    \"jsonwebtoken\": \"^9.0.3\",\n    \"lokijs\": \"^1.5.12\",\n    \"mime\": \"^3.0.0\",\n    \"minimist\": \"^1.2.8\",\n    \"morgan\": \"^1.10.1\",\n    \"nocache\": \"^4.0.0\",\n    \"sanitize-filename\": \"^1.6.3\",\n    \"uuid\": \"^9.0.1\",\n    \"yazl\": \"^3.3.1\"\n  },\n  \"eslintConfig\": {\n    \"env\": {\n      \"browser\": true,\n      \"node\": true,\n      \"jest/globals\": true\n    },\n    \"plugins\": [\"jest\"],\n    \"parserOptions\": {\n      \"sourceType\": \"module\"\n    },\n    \"extends\": [\"@meese-os/eslint-config\", \"plugin:jest/recommended\"]\n  },\n  \"esdoc\": {\n    \"source\": \"./src\",\n    \"destination\": \"./doc\",\n    \"plugins\": [\n      {\n        \"name\": \"esdoc-standard-plugin\",\n        \"option\": {\n          \"brand\": {\n            \"title\": \"meeseOS Server API\",\n            \"description\": \"meeseOS Server API Documentation\"\n          },\n          \"lint\": {\n            \"enable\": false\n          },\n          \"coverage\": {\n            \"enable\": false\n          },\n          \"undocumentIdentifier\": {\n            \"enable\": false\n          }\n        }\n      },\n      {\n        \"name\": \"esdoc-publish-html-plugin\"\n      },\n      {\n        \"name\": \"esdoc-ecmascript-proposal-plugin\",\n        \"option\": {\n          \"all\": true\n        }\n      },\n      {\n        \"name\": \"esdoc-node\"\n      }\n    ]\n  },\n  \"jest\": {\n    \"collectCoverage\": true,\n    \"coverageReporters\": [\n      \"lcov\"\n    ],\n    \"moduleNameMapper\": {\n      \"^meeseOS$\": \"<rootDir>/__mocks__/core.js\"\n    },\n    \"coveragePathIgnorePatterns\": [\n      \"src/esdoc.js\",\n      \"src/config.js\",\n      \"src/providers\",\n      \"/node_modules/\"\n    ]\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/meese-os/meeseOS.git\",\n    \"directory\": \"backend/server\"\n  },\n  \"keywords\": [\n    \"os\",\n    \"osjs\",\n    \"operating system\",\n    \"webOS\",\n    \"meeseOS\",\n    \"server\"\n  ]\n}\n",
    "longname": "/home/runner/work/meeseOS/meeseOS/backend/server/package.json",
    "name": "package.json",
    "static": true,
    "access": "public"
  }
]